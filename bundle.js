var Shared=function(e){var t={};function o(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=11)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IN_DEBUG_MODE=!1,t.NETWORK_IMAGE_BASE_URL="https://lumos2a72105a8e92d4d7888e81371d961ba33135845-prod.s3.us-east-2.amazonaws.com/public/networkImage.",t.LUMOS_API_URL="https://zy6kcqa01a.execute-api.us-east-2.amazonaws.com/prod/",t.LUMOS_APP_BASE_URL_DEBUG="https://localhost:3000",t.LUMOS_APP_BASE_URL_PROD="https://app.lumosbrowser.com",t.LUMOS_APP_BASE_URL=t.IN_DEBUG_MODE?t.LUMOS_APP_BASE_URL_DEBUG:t.LUMOS_APP_BASE_URL_PROD,t.LUMOS_APP_URL=t.LUMOS_APP_BASE_URL+"/messenger/",t.URL_LOGO_128="https://lumospublicassets.s3.us-east-2.amazonaws.com/logo128.png",t.QUERY_PARAM_STRING="q",t.MESSAGES={BROWSERBG_BROWSERFG_URL_UPDATED:"BROWSERBG_BROWSERFG_URL_UPDATED"},t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR="lumos_sidebar",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_OVERLAY="lumos_sidebar_overlay",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_TABS="lumos_sidebar_tabs",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_CONTENT="lumos_sidebar_content",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_SHOW="lumos_sidebar_show",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_HIDE="lumos_sidebar_hide",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_DRAWER="lumos_drawer",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_HIDDEN="lumos_hidden",t.STYLE_COLOR_BORDER="#efefef",t.STYLE_COLOR_LINK="#609",t.STYLE_COLOR_TEXT="#333",t.STYLE_COLOR_TEXT_LIGHT="#777",t.STYLE_COLOR_LUMOS_GOLD="rgb(249, 236, 105, 0.3)",t.STYLE_COLOR_LUMOS_GOLD_SOLID="rgb(249, 236, 105, 1)",t.STYLE_COLOR_LUMOS_DARK_GOLD="#FFB302",t.STYLE_PADDING_PILL="2px 5px",t.STYLE_PADDING_TINY="2px",t.STYLE_PADDING_SMALL="5px",t.STYLE_PADDING_MEDIUM="10px",t.STYLE_PADDING_LARGE="15px",t.STYLE_PADDING_XLARGE="20px",t.STYLE_BORDER_RADIUS_PILL="25px",t.STYLE_WIDTH_LOGO="30px",t.STYLE_WIDTH_SIDEBAR="300px",t.STYLE_WIDTH_SIDEBAR_TAB="100px",t.STYLE_WIDTH_SIDEBAR_TAB_LEFT="30px",t.STYLE_WIDTH_SIDEBAR_TAB_RIGHT="65px",t.STYLE_DRAWER_TAB_BOTTOM_OFFSET="-34px",t.STYLE_DRAWER_TAB_LEFT_OFFSET="10px",t.STYLE_SIDEBAR_HIDER_X_OFFSET="-20px",t.STYLE_SIDEBAR_HIDER_Y_OFFSET="20px",t.STYLE_SIDEBAR_SHOWER_X_OFFSET="5px",t.STYLE_SIDEBAR_SHOWER_Y_OFFSET="30px",t.STYLE_GOOGLE_SERP_EDIT_OFFSET="-20px",t.STYLE_NONSERP_EDIT_OFFSET="10px",t.STYLE_SIDEBAR_TOGGLER_WIDTH="100px",t.STYLE_HEIGHT_DRAWER="50px",t.STYLE_FONT_SIZE_SMALL="10px",t.STYLE_FONT_SIZE_MEDIUM="14px",t.STYLE_FONT_SIZE_LARGE="18px",t.STYLE_ZINDEX_MAX="2147483648",t.STYLE_ZINDEX_PENULTIMATE="2147483647",t.STYLE_PUBLISHER_NAME_LEFT_PADDING="20px",t.INTERCEPTIBLE_SEARCH_HOST_PARAMS=[{pattern:/google\..*/g,queryParam:"q"},{pattern:/bing\..*/g,queryParam:"q"}],t.SERP_LINK_CHECK_INTERVAL=500,t.SENTENCE_SELECTION_REGEX=/(\.\s|\r)\b/,t.HIGHLIGHTS_VALID_ELEMENTS_TO_SEARCH="div, p, li, h1, h2, h3, h4, h5, h6",t.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_MOBILE="SELECTOR_GOOGLE_SERP_RESULT_MOBILE",t.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_IPAD="SELECTOR_GOOGLE_SERP_RESULT_IPAD",t.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_DESKTOP="SELECTOR_GOOGLE_SERP_RESULT_DESKTOP",t.CONFIG_SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP="SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP",t.DEFAULT_CONFIGS={SELECTOR_GOOGLE_SERP_RESULT_MOBILE:".xpd",SELECTOR_GOOGLE_SERP_RESULT_IPAD:"#main.xpd",SELECTOR_GOOGLE_SERP_RESULT_DESKTOP:".g .rc",SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP:".c2xzTb.kp-blk"},t.REACTION_EMOJI_AND_TEXT={STAR:"❤️ Great resource!",GOOD_AUTHOR:"👨‍⚕️ Great author",GOOD_PUBLISHER:"💯 I trust this publication",GOOD_CITATIONS:"🎓 Well cited ",NOT_USEFUL:"🤷 Not useful for this topic",FLAG:"💩 Bad Science",BAD_CITATIONS:"🧐 Needs citations"},t.MIN_GLOBAL_SET_TIMEOUT_VALUE=16,t.ID_NONSERP_CONTAINER="lumos_nonserp_info",t.CLASS_LUMOS_NETWORK_CHECKBOX="lumos-network-checkbox",t.ID_HIGHLIGHT_BAR_HIGHLIGHTED_TEXT="highlight-bar-highlighted-text",t.ID_HIGHLIGHT_BAR="highlight-bar",t.ID_HIGHLIGHT_CONTAINER="lumos_nonserp_info_url_highlights",t.ID_CLICKED_HIGHLIGHT_CONTAINER="lumos_nonserp_info_url_clicked_highlights",t.ID_NONSERP_PUBLISHER_HEADER="lumos_nonserp_publisher_header",t.ID_PUBLISHER_INFO_CONTAINER="lumos_nonserp_info_pub",t.ID_NONSERP_PUB_REACTION_EDITOR="lumos_nonserp_info_pub_reactions",t.ID_NONSERP_URL_INFO_CONTAINER="lumos_nonserp_info_url",t.ID_REACTION_EDITOR_LIST="lumos_nonserp_reaction_editor_list",t.CLASS_HIGHLIGHT_INDEX="highlights-index",t.CLASS_HIGHLIGHT_PILL="highlight-pill",t.CLASS_INACTIVE_HIGHLIGHT="inactive-highlight",t.CLASS_HIDE_HIGHLIGHTS="hide-highlights",t.ID_NETWORK_SELECTION_BAR="network-selection-bar",t.CLASS_AUTOMATIC_HIGHLIGHTS="automatic-highlights",t.CLASS_USER_HIGHLIGHTS="user-highlights",t.CLASS_GOOGLE_SERP_MOBILE_PREPEND="lumos_mobile_prepend",t.STYLE_HIGHLIGHT_BAR_HEIGHT="50%",t.STYLE_MARK_DEFAULT_BACKGROUND_COLOUR="transparent",t.STYLE_AUTOMATIC_HIGHLIGHT_BACKGROUND_COLOUR="yellow",t.STYLE_USER_HIGHLIGHT_BACKGROUND_COLOUR="greenyellow",t.STYLE_MARK_1_HIGHLIGHT_BACKGROUND_COLOUR="plum",t.STYLE_MARK_2_HIGHLIGHT_BACKGROUND_COLOUR="blueviolet",t.RESET_CSS=`\n    line-height: 1.3 !important;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    color: ${t.STYLE_COLOR_TEXT};\n    font-size: ${t.STYLE_FONT_SIZE_MEDIUM};\n    font-weight: normal;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    text-align: left;\n`,t.STYLE_HIGHLIGHT_BOX=`\n    padding: ${t.STYLE_PADDING_MEDIUM};\n    margin: ${t.STYLE_PADDING_SMALL} ${t.STYLE_PADDING_MEDIUM};\n    border: 1px solid ${t.STYLE_COLOR_BORDER};\n    background: ${t.STYLE_COLOR_LUMOS_GOLD};\n    border-radius: 10px;\n    font-style: italic;\n`,t.CLIENT_READER_MODE_PATH="/reader-mode/page",t.CLIENT_MESSAGES={CLIENT_CONTENT_NON_SERP_CONTAINER_STATUS:"nonSerpContainerStatus",CLIENT_CONTENT_FLIP_NON_SERP_CONTAINER:"flipNonSerpContainer"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=window.navigator.userAgent.toLowerCase().includes("mobi")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(0);t.debug=function(...e){r.IN_DEBUG_MODE&&console.log("LUMOS SHARED DEBUG: ",...e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOST_BLACKLIST=["localhost","localhost:3000","www.facebook.com","mail.google.com","app.asana.com","calendar.google.com","www.messenger.com","www.google.com"];t.DEFAULT_MEMBERSHIPS=["8fd59480-8ea1-4e8d-98c1-fb83ccf56855","a816ec16-1e25-4aac-b212-61cdf0c0dd1c","e7e1597e-ab88-4f1f-9541-1fd097552ff9"],t.NETWORK_IMAGE_BASE_URL="https://lumos2a72105a8e92d4d7888e81371d961ba33135845-prod.s3.us-east-2.amazonaws.com/public/networkImage.",t.MESSAGES={WEB_CONTENT_LINK_GRAPHQL_QUERY:"graphQLQuery",WEB_CONTENT_LINK_NEW_URL_PUBLICATION_INFORMATION:"newUrlAndPublicationInformation",WEB_CONTENT_USER_IS_USER_LOGGED_IN:"isUserLoggedIn",WEB_CONTENT_HIGHLIGHT_SHOW_AUTOMATIC_HIGHLIGHT:"showAutomaticHighlight",WEB_CONTENT_HIGHLIGHT_SHOW_NETWORK_HIGHLIGHT:"showNetworkHighlight",WEB_CONTENT_HIGHLIGHT_SHOW_USER_HIGHLIGHT:"showUserHighlight",CONTENT_WEB_LINK_CREATE_USER_AND_PUBLISHER:"createWebUrlAndPublisher",CONTENT_WEB_LINK_GRAPHQL_QUERY:"graphQLQuery",CONTENT_WEB_LINK_GET_URL_AND_PUBLICATION_INFORMATION:"getUrlAndPublicationInformation",CONTENT_WEB_LINK_CREATE_PUBLISHER_OPINION:"createPublisherOpinion",CONTENT_WEB_LINK_EDIT_PUBLISHER_BIO:"editPublisherBio",CONTENT_WEB_LINK_REMOVE_PUBLICATION_OPINION:"removePublicationOpinion",CONTENT_WEB_USER_IS_USER_LOGGED_IN:"isUserLoggedIn",CONTENT_WEB_HIGHLIGHT_SAVE_SELECTED_TEXT:"saveSelectedText",CONTENT_WEB_HIGHLIGHT_GET_ALL_HIGHLIGHT:"getAllHighlight"},t.NEGATIVE_REACTION_NAME="Flagged"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(1),s=o(0),n=o(6);function i(e){let t=document.createElement("span");if("string"!=typeof e){let o=e,r=document.createElement("img");return r.src=o.href,r.setAttribute("style","\n            width: 15px;\n            height: 15px;\n            position: relative;\n            top: 2px;\n            left: -1px;\n        "),t.appendChild(r)}return(t.appendChild(document.createTextNode(e)),t)}function a({firstIcon:e,secondIcon:t,preText:o,reactionImage:n,reactionText:a,postText:c,expanded:l=!1,removeCallback:m,citationUrl:h}){let p=document.createElement("div");if(p.setAttribute("style",`\n        margin-right: ${s.STYLE_PADDING_SMALL};\n        line-height: 1.5;\n        display: inline-block;\n    `),l&&(p.style.borderBottom="none"),p.appendChild(i(e)),p.appendChild(i(t)),o&&p.appendChild(document.createTextNode(" • "+o+" • ")),n&&a){p.appendChild(i(n));let e=document.createElement("span");e.appendChild(document.createTextNode(c?a+" • ":a)),p.appendChild(e),h&&(p.style.cursor="pointer",r.isMobileDevice&&(p.style.borderBottom=`1px solid ${s.STYLE_COLOR_BORDER}`),p.addEventListener("click",()=>{window.location.href=h})),l||(e.style.display="none",r.isMobileDevice||(p.addEventListener("mouseenter",()=>{e.style.display="inherit"}),p.addEventListener("mouseleave",()=>{e.style.display="none"})))}if(c){let e=document.createElement("span");e.appendChild(document.createTextNode(c)),p.appendChild(e)}if(m){let e=document.createElement("span");e.appendChild(document.createTextNode(" ✕")),e.setAttribute("style","cursor: pointer;"),e.addEventListener("click",()=>{m()}),p.appendChild(e)}return p}function c(e,t,o,r){let n=document.createElement("span");n.setAttribute("style",`\n        padding: ${s.STYLE_PADDING_PILL} 0;\n        line-height: 1.5;\n    `);let i=document.createElement("span");return i.appendChild(document.createTextNode(r)),i.setAttribute("style","\n        white-space: nowrap;\n        overflow: hidden !important;\n        text-overflow: ellipsis;\n        display: inline-block;\n        max-width: 350px;\n        vertical-align: bottom;\n    "),i.addEventListener("click",e=>{i.style.maxWidth=""}),n.appendChild(document.createTextNode(o)),n.appendChild(document.createTextNode(": ")),n.appendChild(i),n}function l(e,t,o){let r=document.createElement(o||"span");return r.setAttribute("style",`\n        color: ${s.STYLE_COLOR_TEXT};\n        text-decoration: none;\n        font-family: sans-serif;\n    `),r.id=e,r.setAttribute("data-id",e),r.setAttribute("data-type",t),r}function m(e,t,o){"before"===o?e.parentNode.insertBefore(t,e):"after"===o?e.nextSibling?e.parentNode.insertBefore(t,e):e.parentNode.appendChild(t):"inside"===o&&e.appendChild(t)}function h(e,t,o,r){let s=l(r,"listComponentCreate");return s.id="lumos_list_"+r,m(t,s,o),{id:s.id,element:s}}function p(e,t){return!!e.getElementById("lumos_list_"+t)}function u(e,t,o){let r=e.getElementById("lumos_list_"+t),s=o;Array.from(r.children).forEach(e=>{r.removeChild(e)}),s.forEach(e=>{r.appendChild(e)})}t.createOrGetElementById=function(e,t,o){let r=e.getElementById(t);return r||(r=l(t,"",o),e.body.appendChild(r)),r},t.stylePill=function(e){r.isMobileDevice?(e.style.marginLeft="10px",e.style.marginTop="5px"):e.style.marginRight="5px",e.style.marginBottom="5px"},t.getOrCreateRandomIdForElement=function(e){let t=e.getAttribute("lumos_random_id");if(t)return t;const o=n();return e.setAttribute("lumos_random_id",o),o},t.componentNetworkImage=function(e,t){let o=document.createElement("img");return o.src=e.href,o.setAttribute("title","Network: "+t),o.setAttribute("style","\n        width: 15px;\n        height: 15px;\n        position: relative;\n        top: 2px;\n        left: -1px;\n    "),o},t.componentReactionPill=a,t.componentBio=c,t.componentPublicationReactions=function(e,t,o,n,i){let a=document.createElement("span"),c=document.createElement("span");if(c.appendChild(document.createTextNode(i?" ✏️ Add Reaction":"▼")),c.setAttribute("style",`\n        cursor: pointer;\n        color: ${i?s.STYLE_COLOR_LINK:s.STYLE_COLOR_LUMOS_GOLD_SOLID}\n    `),r.isMobileDevice||a.setAttribute("style",`\n            position: ${"down-left"===n?"absolute":"relative"};\n            left: ${"down-left"===n?s.STYLE_GOOGLE_SERP_EDIT_OFFSET:s.STYLE_NONSERP_EDIT_OFFSET};\n            top: 2px;\n        `),a.appendChild(c),r.isMobileDevice){const r="reactions",s=t.map((e,t)=>Object.assign(Object.assign({},e),{optionIndex:t}));c.addEventListener("click",()=>{document[r]=t,o({command:"showNativeActionSheet",data:{actionSheetId:r,text:e.host,options:JSON.stringify(s)}})})}else{let e=document.createElement("div");function l(e){e.style.visibility="hidden"}e.id=s.ID_REACTION_EDITOR_LIST,e.setAttribute("style",`\n            position: absolute;\n            right: 0;\n            background: white;\n            ${"down-left"===n?"top":"bottom"}: ${s.STYLE_FONT_SIZE_LARGE};\n            border: 1px solid ${s.STYLE_COLOR_BORDER};\n            color: ${s.STYLE_COLOR_LINK};\n            z-index: ${s.STYLE_ZINDEX_MAX};\n            border-radius: ${s.STYLE_PADDING_SMALL};\n            max-width: 160px;\n        `),l(e),function(e,t){t.forEach((function(t,o){let r=document.createElement("div");t.isSeparator?(r.appendChild(document.createTextNode(t.text)),r.setAttribute("style",`\n                        padding: ${s.STYLE_PADDING_SMALL} ${s.STYLE_PADDING_LARGE};\n                        border-bottom: 1px solid ${s.STYLE_COLOR_BORDER};\n                        color: ${0===o?s.STYLE_COLOR_TEXT:s.STYLE_COLOR_TEXT_LIGHT};\n                        font-weight: ${0===o?"bold":"normal"};\n                    `)):(r.setAttribute("style",`\n                        padding: ${s.STYLE_PADDING_SMALL} ${s.STYLE_PADDING_LARGE};\n                        cursor: pointer;\n                    `),r.appendChild(document.createTextNode(t.text)),r.addEventListener("click",()=>{l(e),t.callback()},!1)),e.appendChild(r)}))}(e,t),a.appendChild(e),c.addEventListener("click",()=>{!function(e){return"visible"===e.style.visibility}(e)?function(e){e.style.visibility="visible"}(e):l(e)}),a.appendChild(e)}return a},t.createUIWrapper=l,t.insertElement=m,t.listComponentCreate=h,t.listComponentExists=p,t.listComponentGetByName=function(e,t){return e.getElementById("lumos_list_"+t)},t.listComponentUpdate=u,t.listComponentCreateOrUpdate=function(e,t,o,r,s){p(e,r)||h(0,t,o,r),u(e,r,s)},t.uiPublicationOpinionatorNetworkInfo_ReactionPill=function(e,t=null,o=!1){let r=l(e.id,"uiPublicationOpinionatorNetworkInfo_ReactionPill");return r.appendChild(a({firstIcon:"",secondIcon:"",reactionImage:e.reaction.emoji,reactionText:e.reaction.reaction,postText:e.opinionator.name,removeCallback:t,expanded:o,citationUrl:e.citation?e.citation:null})),r},t.uiPublicationOpinionatorNetworkInfo_Bio=function(e){let t=l(e.id,"uiPublicationOpinionatorNetworkInfo_Bio");return t.appendChild(c(0,e.network.name,e.opinionator.name,e.bio)),t},t.uiWebUrlOpinionatorNetworkInfo_ReactionPill=function(e,t=!1){let o=l(e.id,"uiWebUrlOpinionatorNetworkInfo_ReactionPill");return o.appendChild(a({firstIcon:"",secondIcon:"",reactionImage:e.reaction.emoji,reactionText:e.reaction.reaction,postText:e.opinionator.name,expanded:t,citationUrl:e.citation?e.citation:null})),o},t.uiWebUrlOpinionatorNetworkInfo_Bio=function(e){let t=l(e.id,"uiWebUrlOpinionatorNetworkInfo_Bio");return t.appendChild(c(0,e.network.name,e.opinionator.name,e.comment)),t}},function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(3),n=o(4),i=o(0),a=o(2),c=o(15),l=o(1),m=o(7),h=o(16);function p(e){a.debug("function call - isInterceptibleSearchPage",e);let t=e.hostname;t.startsWith("www.")&&(t=t.slice(4));let o=i.INTERCEPTIBLE_SEARCH_HOST_PARAMS.filter(({pattern:e,queryParam:o})=>t.match(e));if(o.length>0){const t=o[0].queryParam;return e.searchParams.get(t)}return null}function u(e){a.debug("function call - serpDocumentToLinks",e);const t=new URL(e.location.href);return c.isGoogleSerpUrl(t)?c.googleSerpDocumentToLinks(e):Promise.resolve([])}function d(e,t){return r(this,void 0,void 0,(function*(){let o=[];return(yield c.getGoogleSearchContainers(e)).forEach((function(e){e.querySelector("a").hostname===t.hostname&&o.push(e)})),o}))}function _(e){let t,o=c.getContainerForElementInGoogleResult(e,"anchor"),r=e.querySelector(`.${i.CLASS_GOOGLE_SERP_MOBILE_PREPEND}`);return r?(o.contains(r),t=r.querySelector("span")):(r=document.createElement("div"),r.setAttribute("class",i.CLASS_GOOGLE_SERP_MOBILE_PREPEND),l.isMobileDevice&&r.setAttribute("style",`\n            padding: ${i.STYLE_PADDING_SMALL} ${i.STYLE_PADDING_LARGE} 0 ${i.STYLE_PADDING_LARGE};\n        `),t=document.createElement("span"),r.appendChild(t),e.insertBefore(r,e.firstChild)),o.contains(r),{fakeAnchorElement:t,preAnchorElement:r}}function E(e){let t=e.hostname;return t.startsWith("www.")&&(t=t.slice(4)),t}function T(e){return h.HOSTNAME_TO_PATTERN[E(e)]}t.serpUrlToSearchText=p,t.serpDocumentToLinks=u,t.getLinkContainersInSerp=function(e,t){return r(this,void 0,void 0,(function*(){let o=[];return(yield c.getGoogleSearchContainers(e)).forEach((function(e){e.querySelector("a").href===t.href&&o.push(e)})),o}))},t.getMatchingHostnameContainersInSerp=d,t.modifySerpWithURLAndPublicationInfo=function(e,t,o,m,h,p){return r(this,void 0,void 0,(function*(){(yield d(e,m)).forEach(r=>{var u,d,E;if(!r)return;if(l.isMobileDevice&&r.querySelector(i.DEFAULT_CONFIGS[i.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_MOBILE]))return;let T=c.getContainerForElementInGoogleResult(r,"domain_info"),g=c.getContainerForElementInGoogleResult(r,"anchor"),w=c.getContainerForElementInGoogleResult(r,"cached"),I=c.getContainerForElementInGoogleResult(r,"title"),f=n.getOrCreateRandomIdForElement(r),S=g.href,{fakeAnchorElement:L}=_(r);if(t&&m.href===S){if(!l.isMobileDevice)try{let e=T.parentElement;e.style.position="relative",e.style.display="block";let t=g.querySelector("br");t&&t.remove(),g.insertBefore(e,I)}catch(e){a.debug("error in repositioning google serp",e)}let o=t.filter(e=>!!e.reaction).map(e=>h&&e.opinionator.id==h.opinionator.id?n.uiPublicationOpinionatorNetworkInfo_ReactionPill(e,()=>{p({command:s.MESSAGES.CONTENT_WEB_LINK_REMOVE_PUBLICATION_OPINION,data:{opinion:e,link:m}})}):n.uiPublicationOpinionatorNetworkInfo_ReactionPill(e));n.listComponentCreateOrUpdate(e,L,"before","pub_reaction_"+f,o);let r=n.listComponentGetByName(e,"pub_reaction_"+f);l.isMobileDevice&&r.setAttribute("style","\n                ");let c=t.filter(e=>!!e.bio).map(e=>n.uiPublicationOpinionatorNetworkInfo_Bio(e));n.listComponentCreateOrUpdate(e,L,"before","pub_bio_"+f,c);let _=n.listComponentGetByName(e,"pub_bio_"+f);l.isMobileDevice&&_.setAttribute("style",`\n                    font-size: ${i.STYLE_FONT_SIZE_MEDIUM};\n                `);let S=null===(E=null===(d=null===(u=null==t?void 0:t[0])||void 0===u?void 0:u.publication)||void 0===d?void 0:d.name)||void 0===E?void 0:E.split("/");if(S){let e=T.innerText.split("›").map(e=>e.trim()).filter(e=>S.includes(e)).join(" › ");T.innerHTML=e}w&&(w.style.display="none")}if(o&&m.href===S){let t=c.getContainerForElementInGoogleResult(r,"preview_snippet"),s=o.filter(e=>!!e.reaction).map(e=>n.uiWebUrlOpinionatorNetworkInfo_ReactionPill(e));n.listComponentCreateOrUpdate(e,t,"after","url_reaction_"+f,s)}})}))},t.modifySerpWithReactionEditor=function(e,t,o){return r(this,void 0,void 0,(function*(){if(a.debug("modifySerpWithReactionEditor"),!(e&&t&&o))return;const s=yield c.getGoogleSearchContainers(e);e.querySelectorAll(i.DEFAULT_CONFIGS[i.CONFIG_SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP]).forEach(e=>{e.style.overflow="visible"}),s.forEach((function(e){return r(this,void 0,void 0,(function*(){if(e.getAttribute("data-lumos-editor")||l.isMobileDevice&&e.querySelector(i.DEFAULT_CONFIGS[i.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_MOBILE]))return;e.setAttribute("data-lumos-editor","true");let r=new URL(e.querySelector("a").href),s=m.getActionItemsForUrl(r,t,o),a=n.componentPublicationReactions(r,s,o,"down-left",l.isMobileDevice);if(!e)return;let h=c.getContainerForElementInGoogleResult(e,"anchor");if(l.isMobileDevice){let{preAnchorElement:t}=_(e);n.insertElement(t,a,"inside")}else n.insertElement(h,a,"before")}))}))}))},t.urlToHostname=E,t.urlToSearchPattern=T,t.getAlternateSearchEnginesFromSerp=function(e){return r(this,void 0,void 0,(function*(){const t=p(new URL(e.location.href)),o=yield u(e),r=[...new Set(o.map(e=>E(new URL(e))))],s=[...new Set(r.map(e=>h.HOSTNAME_TO_ENTITY[e]).filter(e=>!!e))];let n=[],a=[];s.forEach(e=>{h.ENTITY_TO_HOSTNAMES[e].forEach(t=>{h.HOSTNAME_TO_PREFERENCE[t]&&(n.push({position:-1*(e.split("_").length-1),hostname:t,pattern:h.HOSTNAME_TO_PATTERN[t]}),a.push(t))})});const c=o.map(e=>new URL(e)).map((e,t)=>{let o=E(e);return a.includes(o)?null:{position:t,hostname:o,pattern:T(e)}}).filter(e=>!!e);let l={};n.concat(c).forEach(({position:e,hostname:t,pattern:o})=>{h.HOSTNAME_TO_PREFERENCE[t]&&(l[t]?l[t].score+=c.length-e:o&&(l[t]={hostname:t,pattern:o,score:e>0?c.length-e:1e3*-e}))});let m=Object.values(l).sort((e,t)=>t.score-e.score).map(({hostname:e,pattern:o,score:r},s)=>({title:h.HOSTNAME_TO_TITLE[e]?h.HOSTNAME_TO_TITLE[e]:e,url:new URL(o.replace("{searchTerms}",encodeURI(t))),default:!1}));return m.unshift({title:"Lumos",url:new URL(i.LUMOS_APP_BASE_URL+"/url-info-mobile-large/?src="+encodeURIComponent(e.location.href)),default:!0}),m}))}},function(e,t,o){var r,s,n=o(13),i=o(14),a=0,c=0;e.exports=function(e,t,o){var l=t&&o||0,m=t||[],h=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:s;if(null==h||null==p){var u=n();null==h&&(h=r=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==p&&(p=s=16383&(u[6]<<8|u[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:c+1,E=d-a+(_-c)/1e4;if(E<0&&void 0===e.clockseq&&(p=p+1&16383),(E<0||d>a)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=_,s=p;var T=(1e4*(268435455&(d+=122192928e5))+_)%4294967296;m[l++]=T>>>24&255,m[l++]=T>>>16&255,m[l++]=T>>>8&255,m[l++]=255&T;var g=d/4294967296*1e4&268435455;m[l++]=g>>>8&255,m[l++]=255&g,m[l++]=g>>>24&15|16,m[l++]=g>>>16&255,m[l++]=p>>>8|128,m[l++]=255&p;for(var w=0;w<6;++w)m[l+w]=h[w];return t||i(m)}},function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(2);t.getActionItemsForUrl=function(e,t,o){let n=[],i={};const a=new Set(t.listNetworkPublicationReactions.items.map(e=>(i[e.network.id]=e.network.name,e.network.id)));return n.push({text:e.host,isSeparator:!0}),a.forEach(a=>r(this,void 0,void 0,(function*(){var r;n.push({text:"Network: "+i[a],isSeparator:!0}),null===(r=t.listNetworkPublicationReactions.items)||void 0===r||r.filter(e=>Boolean(e.network.id===a&&!e.autogenerated)).forEach(t=>{n.push({text:(t.emoji||"")+t.reaction,callback:()=>{s.debug("REACTION",t.reaction,"on",e.href),o({command:"createPublisherOpinion",data:{publisherReactionId:t.id,networkId:t.network.id,link:e.href}})}})}),n.push({text:"💬 Edit comment",callback:()=>{const t=window.prompt("Add or edit a description for "+e.hostname,"");o({command:"editPublisherBio",data:{text:t,networkId:a,link:e.href}})}})}))),n}},function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(4),n=o(0),i=o(9),a=o(10),c=o(1),l=o(7),m=o(2),h=`\n    display: block;\n    padding: ${n.STYLE_PADDING_MEDIUM};\n    width: 100%;\n    border-bottom: 1px solid ${n.STYLE_COLOR_BORDER};\n    white-space: nowrap;\n`,p="\n    display: inline-block;\n    font-weight: bold;\n    max-width: 50%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    vertical-align: middle;\n";let u=!1,d=!1,_=null;function E(e){e.style.maxHeight="400px"}function T(e){const t=document.getElementById(n.ID_REACTION_EDITOR_LIST),o=document.getElementById(n.ID_HIGHLIGHT_CONTAINER),r=document.getElementById(n.ID_CLICKED_HIGHLIGHT_CONTAINER);e.style.maxHeight="2px","visible"===t.style.visibility&&(t.style.visibility="hidden"),o.contains(r)&&o.removeChild(r)}function g(e){"400px"===e.style.maxHeight?e.style.maxHeight="2px":e.style.maxHeight="400px"}function w(e,t,o){let r=s.createOrGetElementById(e,n.ID_NONSERP_PUB_REACTION_EDITOR,"div");if(!e.getElementById(n.ID_NONSERP_PUBLISHER_HEADER)){let o=e.createElement("div");o.id=n.ID_NONSERP_PUBLISHER_HEADER;let s=new URL(e.location.href).hostname,i=e.createElement("span");i.appendChild(e.createTextNode(`Publisher • ${s}`)),o.appendChild(i),i.setAttribute("style",p),o.appendChild(r),o.setAttribute("style",h),t.appendChild(o)}if(o){let r=null,i=o.filter(e=>!!e.reaction).map(e=>s.uiPublicationOpinionatorNetworkInfo_ReactionPill(e,null,!0)),a=o.filter(e=>!!e.bio).map(e=>(r=e.publication.name,s.uiPublicationOpinionatorNetworkInfo_Bio(e)));if(a.length>0||i.length>0){let o=e.createElement("div");o.setAttribute("style",`padding: ${n.STYLE_PADDING_MEDIUM};`),t.appendChild(o),s.listComponentCreateOrUpdate(e,o,"inside","publication_reaction_nonserp",i),s.listComponentCreateOrUpdate(e,o,"inside","publication_bio_nonserp",a)}}}function I(e,t,o,r){const s=a.createHighlightSelectionText(e);let i=e.getElementById(n.ID_HIGHLIGHT_BAR),c=e.getElementById(n.ID_NETWORK_SELECTION_BAR),l=e.getElementById(n.ID_HIGHLIGHT_CONTAINER),m=e.getElementById(n.ID_NONSERP_CONTAINER);const h=1===s.selectedText.length&&10===s.selectedText.codePointAt(0);if(!s.selectedText||h||c)i?(T(m),e.getSelection().removeAllRanges(),l.contains(i)&&l.removeChild(i)):s.selectedText&&!h||!c||(T(m),e.getSelection().removeAllRanges(),l.removeChild(c),e.removeEventListener("keyup",a.removeHighlightNetworkSelectionBarListener,!1));else{if(i){e.getElementById(n.ID_HIGHLIGHT_BAR_HIGHLIGHTED_TEXT).textContent=s.selectedText}else i=a.createHighlightInfoBar(s.selectedText),l.appendChild(i);function p(i){!function(i){if(s.selectedText&&("h"===i.key||"H"===i.key)){let i=e.getElementById(n.ID_HIGHLIGHT_BAR);l.removeChild(i),e.removeEventListener("keyup",p,!1),e.removeEventListener("keyup",_,!1),a.modifyPageWithHighlightNetworkSelection(e,t,s,o,r),u=!1,d=!1}}(i)}function _(t){!function(t){if(e.getSelection().toString()&&"Escape"===t.key){let t=e.getElementById(n.ID_HIGHLIGHT_BAR);t&&(T(m),e.getSelection().removeAllRanges(),l.removeChild(t),e.removeEventListener("keyup",_,!1),d=!1)}}(t)}E(m),u||(u=!0,e.addEventListener("keyup",p,!1)),d||(d=!0,e.addEventListener("keyup",_,!1))}}t.showLumosInfoContainer=E,t.hideLumosInfoContainer=T,t.flipLumosInfoContainer=g,t.modifyNonSerpWithURLAndPublicationInfo=function(e,t,o,l){return r(this,void 0,void 0,(function*(){let m=new URL(e.location.href),u=s.createOrGetElementById(e,n.ID_NONSERP_CONTAINER,"div");u.setAttribute("style",`\n        ${n.RESET_CSS}\n        visibility: hidden;\n        position: fixed;\n        box-sizing: border-box;\n        bottom: 0;\n        width: 100%;\n        z-index: ${n.STYLE_ZINDEX_PENULTIMATE};\n        max-height: 2px;\n        transition: max-height 0.25s ease-out;\n        border-top: 2px solid ${n.STYLE_COLOR_LUMOS_GOLD_SOLID};\n        background: white;\n        left: 0;\n        right: 0;\n    `);let d=s.createUIWrapper(n.ID_NONSERP_URL_INFO_CONTAINER,"","div");u.appendChild(d);let I,f=s.createUIWrapper(n.ID_HIGHLIGHT_CONTAINER,"","div"),S=s.createUIWrapper(n.ID_PUBLISHER_INFO_CONTAINER,"","div");if(u.appendChild(S),u.addEventListener("mouseenter",e=>{clearTimeout(_),E(u)}),u.addEventListener("click",e=>{e.stopPropagation()}),!c.isMobileDevice){I=e.createElement("div");let t=e.createElement("img");t.src=n.URL_LOGO_128,t.setAttribute("style",`\n            width: ${n.STYLE_WIDTH_LOGO};\n            height: ${n.STYLE_WIDTH_LOGO};\n            border: 0;\n            vertical-align: inherit;\n        `),I.appendChild(t),I.setAttribute("style",`\n            cursor: pointer;\n            position: absolute;\n            left: ${n.STYLE_DRAWER_TAB_LEFT_OFFSET};\n            top: ${n.STYLE_DRAWER_TAB_BOTTOM_OFFSET};\n            border-radius: ${n.STYLE_PADDING_SMALL} ${n.STYLE_PADDING_SMALL} 0 0;\n            background: white;\n            display: block;\n            text-align: center;\n        `),I.addEventListener("click",()=>{g(u)}),u.appendChild(I)}u.addEventListener("mouseleave",t=>{_=setTimeout(()=>{e.getSelection().toString()||T(u)},3e3)}),u.onselectstart=()=>!1,u.onmousedown=()=>!1;let L=m.pathname,O=e.createElement("div");O.setAttribute("style",h);let N=e.createElement("span");N.appendChild(e.createTextNode(`This page • ${L}`)),N.setAttribute("style",p),O.appendChild(N),d.appendChild(O),i.isReadableDocument(e)&&a.addHighlightIndexToLumosContainer(O);let y=t.linkData;!function(e,t,o){if(o){let r=o.filter(e=>!!e.reaction).map(e=>s.uiWebUrlOpinionatorNetworkInfo_ReactionPill(e,!0)),i=e.createElement("div");i.setAttribute("style",`\n            padding: ${n.STYLE_PADDING_MEDIUM};\n        `),r.length>0&&(t.appendChild(i),s.listComponentCreateOrUpdate(e,i,"inside","url_info_nonserp",r),s.listComponentGetByName(e,"url_info_nonserp").setAttribute("style",`padding: ${n.STYLE_PADDING_SMALL}`))}}(e,d,y),c.isMobileDevice||d.appendChild(f);let A=t.publicationData;w(e,S,A),u.style.visibility="visible",((null==A?void 0:A.length)>0||(null==y?void 0:y.length)>0)&&I&&I.style&&(I.style.backgroundColor=n.STYLE_COLOR_LUMOS_GOLD_SOLID),l({window:window,message:n.CLIENT_MESSAGES.CLIENT_CONTENT_FLIP_NON_SERP_CONTAINER,callback:()=>r(this,void 0,void 0,(function*(){e.getElementById(n.ID_NONSERP_CONTAINER)&&g(e.getElementById(n.ID_NONSERP_CONTAINER))}))}),o({command:n.CLIENT_MESSAGES.CLIENT_CONTENT_NON_SERP_CONTAINER_STATUS,data:{ready:!0}})}))},t.modifyNonSerpPublicationInfo=function(e,t){return r(this,void 0,void 0,(function*(){let o=t.publicationData;const r=e.getElementById(n.ID_PUBLISHER_INFO_CONTAINER);w(e,r,o)}))},t.highlightText=I,t.modifyNonSerpWithReactionEditor=function(e,t,o){if(m.debug("modifyNonSerpWithReactionEditor"),!(e&&t&&o))return;const r=new URL(e.location.href);let i=l.getActionItemsForUrl(r,t,o),a=s.componentPublicationReactions(r,i,o,"up-left",!0);const c=e.getElementById(n.ID_NONSERP_PUB_REACTION_EDITOR);s.insertElement(c,a,"before")},t.modifyNonSerpWithHighlights=function(e,t,o,r,s,n){e.addEventListener("mouseup",t=>I(e,s,r,n)),c.isMobileDevice||a.addHighlightTapListener(e),a.addHighlightStylesheet(e),a.setupHighlightListenerAndPoster(t,o,r)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(17);t.isReadableDocument=function(e){var t=(new XMLSerializer).serializeToString(e),o=(new DOMParser).parseFromString(t,"text/html");return r.isProbablyReaderable(o)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(0),s=o(3),n=o(18),i=o(8),a=o(4),c=new Map,l=new Map;let m=!1,h=!1,p=[],u=null;function d(e,t,o,s,i,a){const p=new n(e.querySelectorAll("body"));s?(m=!0,p.mark(t,{className:r.CLASS_AUTOMATIC_HIGHLIGHTS,separateWordSearch:!1,acrossElements:!0,each:e=>{e.setAttribute("data-opinionator",o)}})):i?(l.has(i)||l.set(i,a),p.mark(t,{className:c.has(i)?c.get(i):(c.set(i,`mark-${c.size+1}`),`mark-${c.size}`),separateWordSearch:!1,acrossElements:!0,each:e=>{e.setAttribute("data-opinionator",a)}})):(h=!0,p.mark(t,{className:r.CLASS_USER_HIGHLIGHTS,separateWordSearch:!1,acrossElements:!0,each:e=>{e.setAttribute("data-opinionator",o)}}))}function _(e){let t=document.createElement("div");return t.setAttribute("id",e),t.setAttribute("style",`\n        height: ${r.STYLE_HIGHLIGHT_BAR_HEIGHT};\n    `),t}function E(e,t,o,n,i){let a=t.getElementById(r.ID_HIGHLIGHT_CONTAINER),c=t.getElementById(r.ID_NETWORK_SELECTION_BAR);u&&clearTimeout(u),u=setTimeout(()=>{a.contains(c)&&a.removeChild(c)},1500),function(e,t){let o=e.getSelection().toString();o&&(d(e,o,t,!1,null,null),setTimeout(()=>{u=null,e.getSelection().removeAllRanges()},1500))}(t,i),n({command:s.MESSAGES.CONTENT_WEB_HIGHLIGHT_SAVE_SELECTED_TEXT,data:{link:t.location.href,selectedNetwork:e.value,highlightSelection:o}})}function T(e){!function(e){let t=document.getElementById(r.ID_NETWORK_SELECTION_BAR),o=document.getElementById(r.ID_NONSERP_CONTAINER),s=document.getElementById(r.ID_HIGHLIGHT_CONTAINER);"Escape"===e.key&&(document.getSelection().removeAllRanges(),i.hideLumosInfoContainer(o),s.removeChild(t),document.removeEventListener("keyup",T,!1))}(e)}function g(e,t){p.includes(t)?p=p.filter(e=>e!==t):p.push(t),function(e,t){p.includes(t)?e.classList.add(r.CLASS_INACTIVE_HIGHLIGHT):e.classList.remove(r.CLASS_INACTIVE_HIGHLIGHT)}(e,t),document.querySelectorAll("mark").forEach(e=>{!function(e,t){e.className.includes(t)&&(p.includes(t)?e.classList.add(r.CLASS_HIDE_HIGHLIGHTS):e.classList.remove(r.CLASS_HIDE_HIGHLIGHTS))}(e,t)})}t.addHighlightStylesheet=function(e){const t=e.createElement("style");t.type="text/css",t.innerHTML=`\n    mark {\n\t\tbackground-color: ${r.STYLE_MARK_DEFAULT_BACKGROUND_COLOUR};\n        color: initial;\n        padding: 0;\n        cursor: pointer;\n    }\n    .${r.CLASS_AUTOMATIC_HIGHLIGHTS} {\n        background-color: ${r.STYLE_AUTOMATIC_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .${r.CLASS_USER_HIGHLIGHTS} {\n        background-color: ${r.STYLE_USER_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .mark-1 {\n        background-color: ${r.STYLE_MARK_1_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .mark-2 {\n        background-color: ${r.STYLE_MARK_2_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .${r.CLASS_HIGHLIGHT_INDEX} {\n        font-size: ${r.STYLE_FONT_SIZE_SMALL};\n        vertical-align: middle;\n        margin-left: 5px;\n        overflow-x: scroll;\n        white-space: nowrap;\n        display: inline-block;\n        overflow: scroll;\n    }\n    .${r.CLASS_HIGHLIGHT_PILL} {\n        margin-right: 5px;\n        padding: 0 5px;\n        border-radius: 3px;\n        display: inline-block;\n        white-space: nowrap;\n        cursor: pointer;\n    }\n    .${r.CLASS_INACTIVE_HIGHLIGHT} {\n        background-color: ${r.STYLE_MARK_DEFAULT_BACKGROUND_COLOUR};\n    }\n    .${r.CLASS_HIDE_HIGHLIGHTS} {\n        background-color: transparent;\n    }\n    `,e.getElementsByTagName("head")[0].appendChild(t)},t.addExistingHighlightToPage=d,t.createHighlightSelectionText=function(e){const t={selectedText:"",selectedTextParentTag:"",selectedTextParentText:""};if(e.getSelection&&(t.selectedText=e.getSelection().toString()),e.getSelection()&&e.getSelection().rangeCount){var o=e.getSelection().getRangeAt(0).commonAncestorContainer;let{selectedTextParentTag:s,selectedTextParentText:n}=function(e){for(var t=e;e;)if(t){if(t.tagName&&r.HIGHLIGHTS_VALID_ELEMENTS_TO_SEARCH.includes(t.tagName.toLowerCase())){return{selectedTextParentTag:t.tagName.toLowerCase(),selectedTextParentText:t.textContent}}t=t.previousElementSibling}else t=e=e.parentElement}(o);t.selectedTextParentTag=s,t.selectedTextParentText=n}return t},t.createHighlightInfoBar=function(e){let t=_(r.ID_HIGHLIGHT_BAR),o=document.createElement("div");o.setAttribute("style",`\n        margin: ${r.STYLE_PADDING_SMALL} ${r.STYLE_PADDING_MEDIUM};\n    `),o.appendChild(document.createTextNode("Press 'H' to save highlight")),t.appendChild(o);const s=document.createElement("div");return s.setAttribute("style",r.STYLE_HIGHLIGHT_BOX),s.id=r.ID_HIGHLIGHT_BAR_HIGHLIGHTED_TEXT,s.appendChild(document.createTextNode(e)),t.appendChild(s),t},t.modifyPageWithHighlightNetworkSelection=function(e,t,o,s,n){let a=e.getElementById(r.ID_NETWORK_SELECTION_BAR),c=e.getElementById(r.ID_NONSERP_CONTAINER),l=e.getElementById(r.ID_HIGHLIGHT_CONTAINER);a||(a=function(e,t,o,s,n){let i=_(r.ID_NETWORK_SELECTION_BAR);return i.setAttribute("style",r.STYLE_HIGHLIGHT_BOX),i.appendChild(e.createTextNode("Select Network(s)")),t.forEach(t=>{const a=e.createElement("input");a.type="checkbox",a.name=t.name,a.value=t.id,a.id=t.id,a.style["-webkit-appearance"]="checkbox",a.style.marginLeft=r.STYLE_PADDING_SMALL,a.classList.add(r.CLASS_LUMOS_NETWORK_CHECKBOX),a.onclick=function(t){let r=this;r.checked&&!r.disabled&&(r.disabled=!0,E(r,e,o,s,n))};const c=e.createElement("label");c.htmlFor=t.id,c.onclick=t=>{let o=e.getElementById(c.getAttribute("for"));o.checked=!0,o.onclick(t)},c.appendChild(e.createTextNode(t.name)),i.appendChild(a),i.appendChild(c)}),i}(e,t,o,s,n),l.appendChild(a),i.showLumosInfoContainer(c),e.addEventListener("keyup",T,!1))},t.removeHighlightNetworkSelectionBarListener=T,t.addHighlightIndexToLumosContainer=function(e){const t=document.createElement("div");t.className=r.CLASS_HIGHLIGHT_INDEX;const o=setInterval(()=>{if(m){const e=document.createElement("span"),s=document.createTextNode("Auto Highlights");e.className=`${r.CLASS_HIGHLIGHT_PILL} ${r.CLASS_AUTOMATIC_HIGHLIGHTS}`,e.appendChild(s),t.appendChild(e),e.onclick=()=>g(e,r.CLASS_AUTOMATIC_HIGHLIGHTS),clearInterval(o)}},r.MIN_GLOBAL_SET_TIMEOUT_VALUE),s=setInterval(()=>{if(h){const e=document.createElement("span"),o=document.createTextNode("Your Highlights");e.className=`${r.CLASS_HIGHLIGHT_PILL} ${r.CLASS_USER_HIGHLIGHTS}`,e.appendChild(o),t.appendChild(e),e.onclick=()=>g(e,r.CLASS_USER_HIGHLIGHTS),clearInterval(s)}},r.MIN_GLOBAL_SET_TIMEOUT_VALUE),n=setInterval(()=>{if(c.size){let e=0;for(let o of c.keys()){e++;const s=document.createElement("span"),n=`mark-${e}`;s.onclick=()=>g(s,n);const i=document.createTextNode(l.get(o));s.className=`${r.CLASS_HIGHLIGHT_PILL} ${n}`,s.appendChild(i),t.appendChild(s)}clearInterval(n)}},r.MIN_GLOBAL_SET_TIMEOUT_VALUE);e.appendChild(t)},t.addHighlightTapListener=function(e){e.addEventListener("click",t=>{let o=t.target,s=o.tagName.toLowerCase();if(o&&"mark"===s){for(;o.classList.value.includes(r.CLASS_HIDE_HIGHLIGHTS)&&"mark"===o.parentElement.tagName.toLowerCase();)o=o.parentElement,s=o.tagName.toLowerCase();o.classList.value.includes(r.CLASS_HIDE_HIGHLIGHTS)||function(e,t){let o=e.getElementById(r.ID_HIGHLIGHT_CONTAINER),s=e.getElementById(r.ID_NONSERP_CONTAINER),n=a.createUIWrapper(r.ID_CLICKED_HIGHLIGHT_CONTAINER,"","div");n.setAttribute("style",`padding: ${r.STYLE_PADDING_SMALL};`);const c=`Highlighted by ${t.getAttribute("data-opinionator")}`,l=e.createElement("div");l.appendChild(e.createTextNode(c)),l.setAttribute("style",`margin: ${r.STYLE_PADDING_SMALL} ${r.STYLE_PADDING_MEDIUM}`),n.firstChild?n.replaceChild(l,n.firstChild):n.appendChild(l),n.style.display="auto",o.childNodes.forEach(e=>{e.style.display="none"}),o.appendChild(n),i.showLumosInfoContainer(s)}(e,o)}else!function(e){let t=e.getElementById(r.ID_HIGHLIGHT_CONTAINER),o=e.getElementById(r.ID_CLICKED_HIGHLIGHT_CONTAINER),s=e.getElementById(r.ID_NONSERP_CONTAINER);e.getSelection().toString()||i.hideLumosInfoContainer(s),t.contains(o)&&t.removeChild(o),t.childNodes.forEach(e=>{e.style.display="auto"})}(e)})},t.setupHighlightListenerAndPoster=function(e,t,o){t({window:window,message:s.MESSAGES.WEB_CONTENT_HIGHLIGHT_SHOW_AUTOMATIC_HIGHLIGHT,callback:e=>{const{highlight:t,opinionator:o}=e.data;d(document,t,o,!0,null,null)}}),t({window:window,message:s.MESSAGES.WEB_CONTENT_HIGHLIGHT_SHOW_NETWORK_HIGHLIGHT,callback:e=>{const{highlight:t,opinionator:o,networkID:r,networkName:s}=e.data;d(document,t,o,!1,r,s)}}),t({window:window,message:s.MESSAGES.WEB_CONTENT_HIGHLIGHT_SHOW_USER_HIGHLIGHT,callback:e=>{const{highlight:t,opinionator:o}=e.data;d(document,t,o,!1,null,null)}}),o({command:s.MESSAGES.CONTENT_WEB_HIGHLIGHT_GET_ALL_HIGHLIGHT,data:{link:e}})}},function(e,t,o){"use strict";function r(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}Object.defineProperty(t,"__esModule",{value:!0}),r(o(12)),r(o(5));var s=o(10);t.addHighlightIndexToLumosContainer=s.addHighlightIndexToLumosContainer,r(o(0)),r(o(1)),r(o(2))},function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(3),n=o(0),i=o(5),a=o(8),c=o(2),l=o(6),m=o(9),h=o(1);t.modifyPage=function(e,t,o,p,u,d,_){return r(this,void 0,void 0,(function*(){const E=i.serpUrlToSearchText(e),T=(e,o,r,n)=>{u({window:t,message:s.MESSAGES.WEB_CONTENT_LINK_GRAPHQL_QUERY,callback:({data:t})=>{c.debug("graphQLQuery",t,o,r,r==t.queryId),t.queryName===e&&t.queryId===r&&n(t.result)}})};let g={filter:{or:d.map(e=>({networkPublicationReactionNetworkId:{eq:e.id}}))},limit:100};const w=l();if(u({window:t,message:"nativeActionSheetOption",callback:e=>{const t=e.data.optionIndex,r=e.data.actionSheetId,s=o[r][t];s&&s.callback()}}),u({window:t,message:"nativeAlertAnswer",callback:e=>{c.debug(e.data.text)}}),e.pathname===n.CLIENT_READER_MODE_PATH||e.hostname!==new URL(n.LUMOS_APP_BASE_URL).hostname&&new URL(o.location.href).hostname!==new URL(n.LUMOS_APP_BASE_URL).hostname)if(E){let e=yield i.serpDocumentToLinks(o);h.isMobileDevice&&setInterval(()=>r(this,void 0,void 0,(function*(){const t=yield i.serpDocumentToLinks(o);t.length>e.length&&(e=t,p({command:"getBatchUrlandPublicationInformation",data:{links:e}}),p({command:s.MESSAGES.CONTENT_WEB_LINK_GRAPHQL_QUERY,data:{queryName:"listNetworkPublicationReactions",queryVariables:g,queryId:w}}))})),n.SERP_LINK_CHECK_INTERVAL),p({command:"getBatchUrlandPublicationInformation",data:{links:e}}),u({window:t,message:s.MESSAGES.WEB_CONTENT_LINK_NEW_URL_PUBLICATION_INFORMATION,callback:e=>{let t=e.data;i.modifySerpWithURLAndPublicationInfo(o,t.publicationData,t.linkData,new URL(t.link),t.user,p)}}),T("listNetworkPublicationReactions",g,w,e=>{let t=e;i.modifySerpWithReactionEditor(o,t,p)}),p({command:s.MESSAGES.CONTENT_WEB_LINK_GRAPHQL_QUERY,data:{queryName:"listNetworkPublicationReactions",queryVariables:g,queryId:w}})}else{const e=o.location.href;m.isReadableDocument(o)&&a.modifyNonSerpWithHighlights(o,e,u,p,d,_),T("listNetworkPublicationReactions",g,w,e=>{let t=e;a.modifyNonSerpWithReactionEditor(o,t,p)}),u({window:t,message:s.MESSAGES.WEB_CONTENT_LINK_NEW_URL_PUBLICATION_INFORMATION,callback:e=>r(this,void 0,void 0,(function*(){let t=e.data;o.getElementById(n.ID_NONSERP_CONTAINER)?a.modifyNonSerpPublicationInfo(o,t):(yield a.modifyNonSerpWithURLAndPublicationInfo(o,t,p,u),p({command:s.MESSAGES.CONTENT_WEB_LINK_GRAPHQL_QUERY,data:{queryName:"listNetworkPublicationReactions",queryVariables:g,queryId:w}}))}))}),p({command:s.MESSAGES.CONTENT_WEB_LINK_GET_URL_AND_PUBLICATION_INFORMATION,data:{link:e}})}else;}))}},function(e,t){var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(o){var r=new Uint8Array(16);e.exports=function(){return o(r),r}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var o=[],r=0;r<256;++r)o[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,s=o;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(1);function i(e){const t=n.isMobileDevice?s.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_MOBILE:s.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_DESKTOP;return Promise.resolve(e.querySelectorAll(s.DEFAULT_CONFIGS[t]))}function a(e,t){let o=n.isMobileDevice?".qzEoUe":"cite",r=n.isMobileDevice?".PpBGzd":"h3",s=n.isMobileDevice?".MUxGbd":".st";switch(t){case"domain_info":return e.querySelector(o);case"title":return e.querySelector(r);case"preview_snippet":return e.querySelector(s);case"anchor":return e.querySelector("a");case"section_links":return e.querySelector(".osl");case"cached":return e.querySelector(".eFM0qc");case"kp-blk":return e.querySelector(".kp-blk");default:return null}}t.getGoogleSearchContainers=i,t.getContainerForElementInGoogleResult=a,t.isGoogleSerpUrl=function(e){return"www.google.com"===e.hostname&&"/search"===e.pathname&&null!==e.searchParams.get("q")&&void 0!==e.searchParams.get("q")},t.googleSerpDocumentToLinks=function(e){return r(this,void 0,void 0,(function*(){let t=[];return(yield i(e)).forEach((function(e){t.push(e.querySelector("a").href)})),t}))},t.modifyBlacklistedGoogleSearchResult=function(e,t){let o=a(e,"title"),r=a(e,"domain_info");t&&r&&o?r.setAttribute("style","text-decoration: line-through;"):t||"line-through"!==r.style.textDecoration||(r.style.textDecoration="inherit")},t.modifyTrustedGoogleSearchResult=function(e,t){let o=a(e,"domain_info");t&&o?o.style.fontStyle="italic":t||"italic"!==o.style.fontStyle||(o.style.fontStyle="inherit")}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOSTNAME_TO_ENTITY={"search.firstround.com":"_ARTICLE_STARTUP_ADVICE","firstround.com":"_ARTICLE_STARTUP_ADVICE","giphy.com":"_IMAGE","imgur.com":"_IMAGE","pixabay.com":"_IMAGE","pexels.com":"_IMAGE","unsplash.com":"_IMAGE","icons8.com":"_IMAGE_ICON","thenounproject.com":"_IMAGE_ICON","fontawesome.com":"_IMAGE_ICON","emedicine.medscape.com":"_MEDICINE","webmd.com":"_MEDICINE","medlineplus.gov":"_MEDICINE","uptodate.com":"_MEDICINE","open.spotify.com":"_MUSIC","coursera.org":"_ONLINECOURSE_ACADEMIC","edx.org":"_ONLINECOURSE_ACADEMIC","udemy.com":"_ONLINECOURSE_SKILL","pluralsight.com":"_ONLINECOURSE_SKILL_TECH","udacity.com":"_ONLINECOURSE_SKILL_TECH","classcentral.com":"_ONLINECOURSE_SKILL","skillshare.com":"_ONLINECOURSE_SKILL_CREATIVE","crunchbase.com":"_ORGANIZATION_COMPANY","app.dealroom.co":"_ORGANIZATION_COMPANY","pitchbook.com":"_ORGANIZATION_COMPANY","scholar.google.com":"_PAPER","sci-hub.tw":"_PAPER","theinfatuation.com":"_PLACE_RESTAURANT","guide.michelin.com":"_PLACE_RESTAURANT","zagat.com":"_PLACE_RESTAURANT","podcasts.apple.com":"_PODCAST","stitcher.com":"_PODCAST","breaker.audio":"_PODCAST","podcasts.google.com":"_PODCAST","listennotes.com":"_PODCAST","amazon.com":"_PRODUCT","walmart.com":"_PRODUCT","goodreads.com":"_PRODUCT_BOOK","kobo.com":"_PRODUCT_BOOK","libgen.ic":"_PRODUCT_BOOK","producthunt.com":"_PRODUCT_DIGITAL","apps.apple.com":"_PRODUCT_DIGITAL_APP","capterra.com":"_PRODUCT_DIGITAL_SAAS","g2.com":"_PRODUCT_DIGITAL_SAAS","trustradius.com":"_PRODUCT_DIGITAL_SAAS","softwareadvice.com":"_PRODUCT_DIGITAL_SAAS","cooking.nytimes.com":"_RECIPE","seriouseats.com":"_RECIPE","youtube.com":"_VIDEO","bing.com/video":"_VIDEO","rottentomatoes.com":"_VIDEO_MOVIE","imdb.com":"_VIDEO_MOVIE","google.com":"GENERAL","bing.com":"GENERAL","duckduckgo.com":"GENERAL","millionshort.com":"GENERAL","stackoverflow.com":"QA_PROGRAMMING"},t.ENTITY_TO_HOSTNAMES={_ARTICLE_STARTUP_ADVICE:["search.firstround.com"],_IMAGE:["giphy.com","pixabay.com","pexels.com"],_IMAGE_ICON:["icons8.com","thenounproject.com"],_MEDICINE:["emedicine.medscape.com","uptodate.com"],_ONLINECOURSE_ACADEMIC:["coursera.org"],_ONLINECOURSE_SKILL:["udemy.com","classcentral.com"],_ONLINECOURSE_SKILL_TECH:["udacity.com"],_ONLINECOURSE_SKILL_CREATIVE:["skillshare.com"],_ORGANIZATION_COMPANY:["crunchbase.com","app.dealroom.co"],_PAPER:["scholar.google.com","sci-hub.tw"],_PLACE_RESTAURANT:["theinfatuation.com","guide.michelin.com","zagat.com"],_PODCAST:["podcasts.apple.com","stitcher.com","breaker.audio","listennotes.com"],_PRODUCT:["amazon.com"],_PRODUCT_BOOK:["libgen.ic"],_PRODUCT_DIGITAL:["producthunt.com"],_PRODUCT_DIGITAL_APP:["apps.apple.com"],_PRODUCT_DIGITAL_SAAS:["capterra.com","g2.com","trustradius.com"],_RECIPE:["cooking.nytimes.com","seriouseats.com"],_VIDEO:["youtube.com","bing.com/video"],_VIDEO_MOVIE:["rottentomatoes.com","imdb.com"],GENERAL:["google.com","bing.com","duckduckgo.com","millionshort.com"],QA_PROGRAMMING:["stackoverflow.com"]},t.HOSTNAME_TO_PREFERENCE={"search.firstround.com":!0,"giphy.com":!0,"pixabay.com":!0,"pexels.com":!0,"icons8.com":!0,"thenounproject.com":!0,"emedicine.medscape.com":!0,"uptodate.com":!0,"coursera.org":!0,"udemy.com":!0,"udacity.com":!0,"classcentral.com":!0,"skillshare.com":!0,"crunchbase.com":!0,"app.dealroom.co":!0,"scholar.google.com":!0,"sci-hub.tw":!0,"theinfatuation.com":!0,"guide.michelin.com":!0,"zagat.com":!0,"podcasts.apple.com":!0,"stitcher.com":!0,"breaker.audio":!0,"listennotes.com":!0,"amazon.com":!0,"libgen.ic":!0,"producthunt.com":!0,"apps.apple.com":!0,"capterra.com":!0,"g2.com":!0,"trustradius.com":!0,"cooking.nytimes.com":!0,"seriouseats.com":!0,"youtube.com":!0,"bing.com/video":!0,"rottentomatoes.com":!0,"imdb.com":!0,"google.com":!0,"bing.com":!0,"duckduckgo.com":!0,"millionshort.com":!0,"stackoverflow.com":!0},t.HOSTNAME_TO_PATTERN={"shutterstock.com":"https://www.shutterstock.com/search/?searchterm={searchTerms}","jamieoliver.com":"https://www.jamieoliver.com/search/?s={searchTerms}","tenor.com":"https://tenor.com/search/?q={searchTerms}","apkpure.com":"https://apkpure.com/search?q={searchTerms}","collegemagazine.com":"https://www.collegemagazine.com/?s={searchTerms}","goodmenproject.com":"https://goodmenproject.com#?s={searchTerms}","zagat.com":"https://zagat.com/search?search_term={searchTerms}","perezhilton.com":"https://perezhilton.com?s={searchTerms}","trustradius.com":"https://www.trustradius.com/search?q={searchTerms}","nbcnews.com":"https://www.nbcnews.com/search?q={searchTerms}","urbandictionary.com":"https://www.urbandictionary.com/search.php?term={searchTerms}","washingtonian.com":"https://www.washingtonian.com/?s={searchTerms}","allmusic.com":"https://www.allmusic.com/search?term={searchTerms}","rollingstone.com":"https://pages.email.rollingstone.com/signup-api/?EmailAddress={searchTerms}","tripadvisor.ca":"https://www.tripadvisor.ca/Search?q={searchTerms}","co.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","cnet.com":"https://www.cnet.com/search/?query={searchTerms}","microsoft.com":"https://www.microsoft.com/en-us/search?q={searchTerms}","guide.michelin.com":"https://guide.michelin.com/us/en/search?q={searchTerms}","giphy.com":"https://giphy.com/search/{searchTerms}","bbcgoodfood.com":"https://www.bbcgoodfood.com/search/recipes?query={searchTerms}","moneycrashers.com":"https://www.moneycrashers.com/?s={searchTerms}","cookingclassy.com":"https://www.cookingclassy.com?s={searchTerms}","acegif.com":"https://acegif.com/?s={searchTerms}","sublimechina.com":"https://sublimechina.com/?s={searchTerms}","flickr.com":"https://www.flickr.com/search/?text={searchTerms}","plasticsurgerypeople.com":"https://www.plasticsurgerypeople.com/?s={searchTerms}","fivebooks.com":"https://fivebooks.com/?s={searchTerms}","hu.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","techsable.com":"https://techsable.com/?s={searchTerms}","walmart.com":"https://walmart.com/search/?query={searchTerms}","dc.eater.com":"https://voxmedia.createsend.com/t/d/s/pkuhli/?email={searchTerms}","tr.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","bing.com/video":"https://www.bing.com/videos/search?q={searchTerms}","listennotes.com":"https://www.listennotes.com/search/?q={searchTerms}","id.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","cntraveler.com":"https://www.cntraveler.com/search?q={searchTerms}","bookdepository.com":"https://www.bookdepository.com/search?searchTerm={searchTerms}","icons8.com":"https://icons8.com/icons/set/{searchTerms}","templates.office.com":"https://templates.office.com/en-us/Search/results?query={searchTerms}","funnygifsbox.com":"https://funnygifsbox.com/?s={searchTerms}","iamandco.com":"https://iamandco.com/search?q={searchTerms}","intouchweekly.com":"https://www.intouchweekly.com/search-results/?_s={searchTerms}","pl.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","tailandfur.com":"https://tailandfur.com?s={searchTerms}","amindfullmom.com":"https://amindfullmom.com/?s={searchTerms}","discogs.com":"https://www.discogs.com/search/?q={searchTerms}","epicurious.com":"https://www.epicurious.com/search/?terms={searchTerms}","mashable.com":"https://mashable.com/search/?q={searchTerms}","pinterest.co.uk":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","pinterest.co.kr":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","tampabay.com":"https://www.tampabay.com/search/?q={searchTerms}","bbc.co.uk":"https://search.bbc.co.uk/search?q={searchTerms}","eonline.com":"https://www.eonline.com/search?query={searchTerms}","reddit.com":"https://www.google.com/search?q=site%3Areddit.com+{searchTerms}","metrolyrics.com":"https://www.metrolyrics.com/search.php","goodreads.com":"https://goodreads.com/search?query={searchTerms}","reactiongifs.com":"https://www.reactiongifs.com/?s={searchTerms}","tomsguide.com":"https://www.tomsguide.com/search?searchTerm={searchTerms}","imgflip.com":"https://imgflip.com/search?q={searchTerms}","nl.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","uncommongoods.com":"https://www.uncommongoods.com/blog/?s={searchTerms}","thebrobasket.com":"https://www.thebrobasket.com/?s={searchTerms}","esquire.com":"https://www.esquire.com/search/?q={searchTerms}","yourselfquotes.com":"https://www.yourselfquotes.com/?s={searchTerms}","moderngentlemanmagazine.com":"https://www.moderngentlemanmagazine.com/?s={searchTerms}","elitedaily.com":"https://www.elitedaily.com/search?q={searchTerms}","barnesandnoble.com":"https://www.barnesandnoble.com/includes/submit.jsp?_DARGS=/cartridges/HeaderSearchBox/HeaderSearchBox.jsp?Ntt={searchTerms}","gifts.com":"https://www.gifts.com/blog/thank-you?email={searchTerms}","hellomagazine.com":"https://hellomagazine.us12.list-manage.com/subscribe/post?u=194a250663bd2b8b5c5a586c3&id=95b594f122?EMAIL={searchTerms}","ar.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","agcwebpages.com":"https://www.paypal.com/cgi-bin/webscr?submit={searchTerms}","bing.com":"https://bing.com/search?q={searchTerms}","myrecipes.com":"https://www.myrecipes.com/search?q={searchTerms}","pandagif.com":"https://pandagif.com/search-post?search={searchTerms}","recipes.instantpot.com":"https://recipes.instantpot.com#?search={searchTerms}","today.com":"https://www.today.com/search?query={searchTerms}","photosforclass.com":"https://www.photosforclass.com/search?text={searchTerms}","quora.com":"https://www.quora.com/opensearch/query?q={searchTerms}&pw={startPage?}&format=rss","pinterest.fr":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","fi.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","blog.feedspot.com":"https://www.feedspot.com/?email={searchTerms}","seriouseats.com":"https://www.seriouseats.com/search?term={searchTerms}","kobo.com":"https://kobo.com/us/en/search?query={searchTerms}","gfycat.com":"https://gfycat.com/gifs/search?searchText={searchTerms}","cz.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","fontawesome.com":"https://fontawesome.com/icons?q={searchTerms}","podcasts.apple.com":"https://www.listennotes.com/search/?q={searchTerms}","pitchbook.com":"https://pitchbook.com/news/search?query={searchTerms}","skillshare.com":"https://www.skillshare.com/search?query={searchTerms}","washingtonpost.com":"//www.washingtonpost.com/newssearch/?query={searchTerms}","edx.org":"https://www.edx.org/course?search_query={searchTerms}","etsy.com":"https://www.etsy.com/join/email?from_page=https%3A%2F%2Fwww.etsy.com%2Fmarket%2Fsignificant_other?email={searchTerms}","realsimple.com":"https://www.realsimple.com/search?q={searchTerms}","menshealth.com":"https://www.menshealth.com/search/?q={searchTerms}","billboard.com":"https://www.billboard.com/search/?keys={searchTerms}","popsugar.com":"https://www.popsugar.com/gsearch?query={searchTerms}","lovehopeadventure.com":"https://lovehopeadventure.com?s={searchTerms}","birthmoviesdeath.com":"https://birthmoviesdeath.com?keywords={searchTerms}","ny.eater.com":"https://voxmedia.createsend.com/t/d/s/pkudkl/?email={searchTerms}","pinterest.en.uptodown.com":"https://en.uptodown.com/android/search?q={searchTerms}","finecooking.com":"https://www.finecooking.com?s={searchTerms}","glamour.com":"https://www.glamour.com/search?q={searchTerms}","jamesclear.com":"https://jamesclear.com/?s={searchTerms}","azlyrics.com":"//search.azlyrics.com/search.php?q={searchTerms}","sweetyhigh.com":"https://www.sweetyhigh.com/search?search={searchTerms}","thenounproject.com":"https://thenounproject.com/search/?q={searchTerms}","bakemesomesugar.com":"https://bakemesomesugar.com/?s={searchTerms}","store.instantpot.ca":"https://store.instantpot.ca/search?q={searchTerms}","theodysseyonline.com":"https://www.theodysseyonline.com/search/?q={searchTerms}","gettyimages.com":"https://www.gettyimages.com/search/2/image?phrase={searchTerms}","theguardian.com":"https://www.google.co.uk/search?q={searchTerms}","cnn.com":"https://www.cnn.com/search?q={searchTerms}","biography.com":"https://www.biography.com/search?query={searchTerms}","boredpanda.com":"//app.mailerlite.com/webforms/submit/r3n5d4?fields[email]={searchTerms}","bodymeasurements.org":"https://www.bodymeasurements.org/?s={searchTerms}","google.com":"https://google.com/search?q={searchTerms}","capterra.com":"https://www.capterra.com/search/?search={searchTerms}","shopify.com":"https://www.shopify.com/blog/search?q={searchTerms}","en.wikipedia.org":"https://en.wikipedia.org/w/index.php?search={searchTerms}","blog.personalizationmall.com":"https://blog.personalizationmall.com/?s={searchTerms}","youqueen.com":"https://youqueen.com/?s={searchTerms}","countryliving.com":"https://www.countryliving.com/search/?q={searchTerms}","diethood.com":"https://diethood.com/?s={searchTerms}","fodors.com":"https://www.fodors.com/search?search_string={searchTerms}","gifrific.com":"https://gifrific.com/?s={searchTerms}","podcasts.google.com":"https://podcasts.google.com/?q={searchTerms}","mydomaine.com":"https://www.mydomaine.com/search?q={searchTerms}","vegrecipesofindia.com":"https://www.vegrecipesofindia.com/?s={searchTerms}","free-ebooks.net":"https://www.free-ebooks.net/search?q={searchTerms}","pressurecookrecipes.com":"https://www.pressurecookrecipes.com/?s={searchTerms}","mensjournal.com":"https://www.mensjournal.com?email={searchTerms}","thehollywoodgossip.com":"https://www.thehollywoodgossip.com/search?q={searchTerms}","starmagazine.com":"https://starmagazine.com/search?search={searchTerms}","kingsroadmerch.com":"https://kingsroadmerch.com/beastie-boys/search/index.php?search={searchTerms}","britannica.com":"https://www.britannica.com/print/article/1580265?sequence[]={searchTerms}","thesun.co.uk":"https://www.thesun.co.uk/?s={searchTerms}","bestbooks.net":"https://www.bestbooks.net/?s={searchTerms}","damndelicious.net":"https://damndelicious.net/?s={searchTerms}","celebritygossip.com":"https://www.celebritygossip.com/?s={searchTerms}","in.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","rottentomatoes.com":"https://www.rottentomatoes.com/search?search={searchTerms}","tripadvisor.com":"https://www.tripadvisor.com/Search?q={searchTerms}","m.youtube.com":"https://m.youtube.com/results?search_query={searchTerms}","time.com":"https://time.com/search?q={searchTerms}","atlantablackstar.com":"https://atlantablackstar.com/?s={searchTerms}","youtube.com":"https://youtube.com/results?search_query={searchTerms}","pinterest.se":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","dailymail.co.uk":"https://www.dailymail.co.uk/home/search.html?ITO=1704&searchPhrase={searchTerms}","celebrityinsider.org":"https://feedburner.google.com/fb/a/mailverify?email={searchTerms}","travelandleisure.com":"https://www.travelandleisure.com/search?q={searchTerms}","usatoday.com":"https://www.usatoday.com/search/?q={searchTerms}","pixabay.com":"https://pixabay.com/images/search/{searchTerms}/","bysophialee.com":"https://bysophialee.com/?s={searchTerms}","nationalzoo.si.edu":"https://nationalzoo.si.edu/webcams/panda-cam?search_keys={searchTerms}","syfy.com":"https://www.syfy.com/syfywire/chosen-one-of-the-day-the-panda-as-described-on-sifl-olly?newsletter[email]={searchTerms}","bestproducts.com":"https://www.bestproducts.com/search/?q={searchTerms}","travelchinaguide.com":"https://www.travelchinaguide.com/search/show.htm?q={searchTerms}","wikihow.com":"https://www.wikihow.com/wikiHowTo?search={searchTerms}","zoo.sandiegozoo.org":"https://zoo.sandiegozoo.org/site-search?search_api_fulltext={searchTerms}","gr.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","theshaderoom.com":"https://theshaderoom.com/#gf_3?input_2={searchTerms}","medlineplus.gov":"https://vsearch.nlm.nih.gov/vivisimo/cgi-bin/query-meta?query={searchTerms}","amazon.co.uk":"https://www.amazon.co.uk/s/ref=nb_sb_noss?field-keywords={searchTerms}","nydailynews.com":"https://www.nydailynews.com/search/?={searchTerms}","pexels.com":"https://www.pexels.com/search/{searchTerms}/","producthunt.com":"https://www.producthunt.com/search?q={searchTerms}","stockfreeimages.com":"https://www.stockfreeimages.com/search.php?search={searchTerms}","london.eater.com":"https://voxmedia.createsend.com/t/d/s/mutqk/?email={searchTerms}","thedailymeal.com":"https://www.thedailymeal.com/wine-search/Marco%20Felluga?text={searchTerms}","livemusicblog.com":"https://livemusicblog.com/?s={searchTerms}","duckduckgo.com":"https://duckduckgo.com/?q={searchTerms}","apps.apple.com":"https://www.google.com/search?q=site%3Aapps.apple.com+{searchTerms}","search.firstround.com":"https://search.firstround.com/search?query={searchTerms}","bhg.com":"https://www.bhg.com        /search/?q={searchTerms}","theinfatuation.com":"https://www.theinfatuation.com/search?query={searchTerms}","gossip-tv.gr":"https://www.gossip-tv.gr/search?q={searchTerms}","lifewire.com":"https://www.lifewire.com/search?q={searchTerms}","stackoverflow.com":"https://www.google.com/search?q=site%3Astackoverflow.com+{searchTerms}","harpersbazaar.com":"https://www.harpersbazaar.com/search/?q={searchTerms}","worldwildlife.org":"https://www.worldwildlife.org/search?x={searchTerms}","express.co.uk":"https://www.express.co.uk/search?query={searchTerms}","rd.com":"https://www.rd.com/?s={searchTerms}","idonthavetimeforthat.com":"https://www.idonthavetimeforthat.com/?s={searchTerms}","pbh2.com":"//pbh-network.com/subs.php?EMAIL={searchTerms}","pinterest.es":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","istockphoto.com":"https://www.istockphoto.com/search/2/image?phrase={searchTerms}","open.spotify.com":"https://open.spotify.com/search/{searchTerms}","atlantamagazine.com":"https://www.atlantamagazine.com/?s={searchTerms}","tumblr.com":"https://www.tumblr.com/search?q={searchTerms}","amazon.com":"https://www.amazon.com/s?k={searchTerms}","healthyceleb.com":"https://healthyceleb.com/?s={searchTerms}","techlicious.com":"https://www.techlicious.com/?keywords={searchTerms}","lifeandstylemag.com":"https://www.lifeandstylemag.com/search-results/?_s={searchTerms}","last.fm":"https://www.last.fm/search?q={searchTerms}","bestofcomicbooks.com":"https://bestofcomicbooks.com/?s={searchTerms}","crunchbase.com":"https://www.crunchbase.com/textsearch?q={searchTerms}","pinterest.jp":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","people.com":"https://people.com        /search/?q={searchTerms}","temeculablogs.com":"https://temeculablogs.com/?s={searchTerms}","123rf.com":"https://www.123rf.com/reversesearch/?file_upload={searchTerms}","pipingpotcurry.com":"https://pipingpotcurry.com/?s={searchTerms}","nme.com":"https://www.nme.com/?s={searchTerms}","target.com":"https://www.target.com/s?searchTerm={searchTerms}","abebooks.com":"https://www.abebooks.com/servlet/SearchResults?kn={searchTerms}","dwellinginhappiness.com":"https://www.dwellinginhappiness.com/?s={searchTerms}","cookinglight.com":"https://www.cookinglight.com/search?q={searchTerms}","millionshort.com":"https://millionshort.com/search?keywords={searchTerms}&shopping=&chat=&remove=100000&country=&dt=","money.usnews.com":"https://money.usnews.com/emailprefs/list-add?list=US+News+Invested?email={searchTerms}","pinchofyum.com":"https://pinchofyum.com/?s={searchTerms}","g2.com":"https://www.g2.com/search?utf8=%E2%9C%93&query={searchTerms}","pinterest.it":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","cosmopolitan.com":"https://www.cosmopolitan.com/uk/search/?q={searchTerms}","scholar.google.com":"https://scholar.google.com/scholar?q={searchTerms}","tasteofhome.com":"https://www.tasteofhome.com/search/index?search={searchTerms}","cooksillustrated.com":"https://www.cooksillustrated.com/search?q={searchTerms}","goodhousekeeping.com":"https://www.goodhousekeeping.com/search/?q={searchTerms}","digitaltrends.com":"https://www.digitaltrends.com?s={searchTerms}","marthastewart.com":"https://www.marthastewart.com/search?q={searchTerms}","elle.com":"https://www.elle.com/search/?q={searchTerms}","picgifs.com":"https://www.picgifs.com/search/images?query={searchTerms}","simplyrecipes.com":"https://www.simplyrecipes.com/?s={searchTerms}","imgur.com":"https://imgur.com/search?q={searchTerms}","classic.wowhead.com":"https://classic.wowhead.com/search?q={searchTerms}","bustle.com":"https://www.bustle.com/search?q={searchTerms}","justjared.com":"https://www.justjared.com/?s={searchTerms}","pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","gossipcop.com":"https://www.gossipcop.com/?s={searchTerms}","msn.com":"https://www.bing.com/search?scope=web?q={searchTerms}","br.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","topinspired.com":"https://www.topinspired.com/?s={searchTerms}","invertedgear.com":"https://www.invertedgear.com/contact#contact_form?contact[email]={searchTerms}","tmz.com":"https://www.tmz.com/search/?q={searchTerms}","pinterest.com.mx":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","sci-hub.tw":"https://sci-hub.tw/?request={searchTerms}","udemy.com":"https://www.udemy.com/courses/search/?q={searchTerms}","bestreviews.com":"https://bestreviews.com/search?q={searchTerms}","stitcher.com":"https://stitcher.com/search?q={searchTerms}","thespruceeats.com":"https://www.thespruceeats.com/search/?q={searchTerms}","foodandwine.com":"https://www.foodandwine.com/search?q={searchTerms}","momenvy.co":"https://momenvy.co/?s={searchTerms}","delish.com":"https://www.delish.com/search/?q={searchTerms}","libgen.ic":"https://libgen.lc/search.php?req={searchTerms}","pinterest.de":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","webmd.com":"https://www.webmd.com/search/search_results/default.aspx?query={searchTerms}","penguinrandomhouse.com":"https://www.penguinrandomhouse.com/search/site?q={searchTerms}","leakedpie.com":"https://leakedpie.com/?s={searchTerms}","wellplated.com":"https://www.wellplated.com/?s={searchTerms}","bestrestaurantssedona.com":"https://bestrestaurantssedona.com/listings/?search_keywords={searchTerms}","thegreatestbooks.org":"https://www.thegreatestbooks.org/items/search?search_terms={searchTerms}","github.com":"https://github.com/search?q={searchTerms}","cooking.nytimes.com":"https://cooking.nytimes.com/search?q={searchTerms}","store.instantpot.com":"https://store.instantpot.com/search?q={searchTerms}","towardsdatascience.com":"https://towardsdatascience.com/search?q={searchTerms}&ref=opensearch","uptodate.com":"https://www.uptodate.com/contents/search?search={searchTerms}","coursera.org":"https://www.coursera.org/search?query={searchTerms}","play.google.com":"https://play.google.com/store/search?q={searchTerms}&c=apps&hl=en_US","unsplash.com":"https://unsplash.com/s?searchKeyword={searchTerms}","wall.alphacoders.com":"https://wall.alphacoders.comsearch.php?search={searchTerms}","imdb.com":"https://m.imdb.com/find?q={searchTerms}&ref_=nv_sr_sm","lowgif.com":"https://www.lowgif.com#?s={searchTerms}","classcentral.com":"https://www.classcentral.com/search?q={searchTerms}","emedicine.medscape.com":"https://search.medscape.com/search/?q={searchTerms}","huffpost.com":"https://search.huffpost.com/search?p={searchTerms}","pluralsight.com":"https://www.pluralsight.com/search?q={searchTerms}","gif-vif.com":"https://www.gif-vif.com/search.php?search_keyword={searchTerms}"},t.HOSTNAME_TO_TITLE={"search.firstround.com":"First Round Search","firstround.com":"First Round Review","giphy.com":"Giphy","imgur.com":"Imgur","pixabay.com":"Pixabay","pexels.com":"Pexels","unsplash.com":"Unsplash","icons8.com":"Icons8","thenounproject.com":"The Noun Project","fontawesome.com":"Font Awesome","emedicine.medscape.com":"Medscape","webmd.com":"WebMD","medlineplus.gov":"Medline Plus","uptodate.com":"UpToDate","open.spotify.com":"Spotify","coursera.org":"Coursera","edx.org":"edX","udemy.com":"Udemy","pluralsight.com":"Pluralsight","udacity.com":"Udacity","classcentral.com":"Classcentral","skillshare.com":"Skillshare","crunchbase.com":"Crunchbase","app.dealroom.co":"Dealroom","pitchbook.com":"Pitchbook","scholar.google.com":"Google Scholar","sci-hub.tw":"Sci Hub","theinfatuation.com":"The Infatuation","guide.michelin.com":"Michelin Guide","zagat.com":"Zagat","podcasts.apple.com":"Apple Podcasts","stitcher.com":"Stitcher","breaker.audio":"Breaker","podcasts.google.com":"Google Podcasts","listennotes.com":"ListenNotes","amazon.com":"Amazon","walmart.com":"Walmart","goodreads.com":"Goodreads","kobo.com":"Kobo","libgen.ic":"Library Genesis","producthunt.com":"Product Hunt","apps.apple.com":"Apple App Store","capterra.com":"Capterra","g2.com":"G2","trustradius.com":"TrustRadius","softwareadvice.com":"softwareadvice.com","cooking.nytimes.com":"NYTimes Cooking","seriouseats.com":"Serious Eats","youtube.com":"YouTube","bing.com/video":"Bing Video","rottentomatoes.com":"Rotten Tomatoes","imdb.com":"IMDB","google.com":"Google","bing.com":"Bing","duckduckgo.com":"DuckDuckGo","millionshort.com":"Million Short","stackoverflow.com":"StackOverflow"}},function(e,t,o){"use strict";o.r(t),o.d(t,"isProbablyReaderable",(function(){return n}));var r={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function s(e){return!(e.style&&"none"==e.style.display||e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"true"==e.getAttribute("aria-hidden"))}function n(e,t){t||(t=s);var o=document.querySelectorAll("article").length;if(1===o)return!0;if(o>1)return!1;var n=e.querySelectorAll("p, pre"),i=e.querySelectorAll("div > br");if(i.length){var a=new Set(n);[].forEach.call(i,(function(e){a.add(e.parentNode)})),n=Array.from(a)}var c=0;return[].some.call(n,(function(e){if(!t(e))return!1;var o=e.className+" "+e.id;if(r.unlikelyCandidates.test(o)&&!r.okMaybeItsACandidate.test(o))return!1;if(e.matches("li p"))return!1;var s=e.textContent.trim().length;return!(s<140)&&(c+=Math.sqrt(s-140))>20}))}},function(e,t,o){
/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=function(){function e(o){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=o,this.iframes=r,this.exclude=s,this.iframesTimeout=n}return o(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var o=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||o||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0;try{var s=e.contentWindow;if(r=s.document,!s||!r)throw new Error("iframe inaccessible")}catch(e){o()}r&&t(r)}},{key:"isIframeBlank",value:function(e){var t="about:blank",o=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&o!==t&&o}},{key:"observeIframeLoad",value:function(e,t,o){var r=this,s=!1,n=null,i=function i(){if(!s){s=!0,clearTimeout(n);try{r.isIframeBlank(e)||(e.removeEventListener("load",i),r.getIframeContents(e,t,o))}catch(e){o()}}};e.addEventListener("load",i),n=setTimeout(i,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,o){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,o):this.getIframeContents(e,t,o):this.observeIframeLoad(e,t,o)}catch(e){o()}}},{key:"waitForIframes",value:function(e,t){var o=this,r=0;this.forEachIframe(e,(function(){return!0}),(function(e){r++,o.waitForIframes(e.querySelector("html"),(function(){--r||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,o,r){var s=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=t.querySelectorAll("iframe"),a=i.length,c=0;i=Array.prototype.slice.call(i);var l=function(){--a<=0&&n(c)};a||l(),i.forEach((function(t){e.matches(t,s.exclude)?l():s.onIframeReady(t,(function(e){o(t)&&(c++,r(e)),l()}),l)}))}},{key:"createIterator",value:function(e,t,o){return document.createNodeIterator(e,t,o,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,o){if(e.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,o,r){var s=!1,n=!1;return r.forEach((function(e,t){e.val===o&&(s=t,n=e.handled)})),this.compareNodeIframe(e,t,o)?(!1!==s||n?!1===s||n||(r[s].handled=!0):r.push({val:o,handled:!0}),!0):(!1===s&&r.push({val:o,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,o,r){var s=this;e.forEach((function(e){e.handled||s.getIframeContents(e.val,(function(e){s.createInstanceOnIframe(e).forEachNode(t,o,r)}))}))}},{key:"iterateThroughNodes",value:function(e,t,o,r,s){for(var n,i=this,a=this.createIterator(t,e,r),c=[],l=[],m=void 0,h=void 0;n=void 0,n=i.getIteratorNode(a),h=n.prevNode,m=n.node;)this.iframes&&this.forEachIframe(t,(function(e){return i.checkIframeFilter(m,h,e,c)}),(function(t){i.createInstanceOnIframe(t).forEachNode(e,(function(e){return l.push(e)}),r)})),l.push(m);l.forEach((function(e){o(e)})),this.iframes&&this.handleOpenIframes(c,e,o,r),s()}},{key:"forEachNode",value:function(e,t,o){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},n=this.getContexts(),i=n.length;i||s(),n.forEach((function(n){var a=function(){r.iterateThroughNodes(e,n,t,o,(function(){--i<=0&&s()}))};r.iframes?r.waitForIframes(n,a):a()}))}}],[{key:"matches",value:function(e,t){var o="string"==typeof t?[t]:t,r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(r){var s=!1;return o.every((function(t){return!r.call(e,t)||(s=!0,!1)})),s}return!1}}]),e}(),n=function(){function n(e){t(this,n),this.ctx=e,this.ie=!1;var o=window.navigator.userAgent;(o.indexOf("MSIE")>-1||o.indexOf("Trident")>-1)&&(this.ie=!0)}return o(n,[{key:"log",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",r=this.opt.log;this.opt.debug&&"object"===(void 0===r?"undefined":e(r))&&"function"==typeof r[o]&&r[o]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,o=this.opt.caseSensitive?"":"i",r=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var s in t)if(t.hasOwnProperty(s)){var n=t[s],i="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(s):this.escapeStr(s),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(n):this.escapeStr(n);""!==i&&""!==a&&(e=e.replace(new RegExp("("+this.escapeStr(i)+"|"+this.escapeStr(a)+")","gm"+o),r+"("+this.processSynomyms(i)+"|"+this.processSynomyms(a)+")"+r))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,o){var r=o.charAt(t+1);return/[(|)\\]/.test(r)||""===r?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],o=this.opt.ignorePunctuation;return Array.isArray(o)&&o.length&&t.push(this.escapeStr(o.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",o=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],r=[];return e.split("").forEach((function(s){o.every((function(o){if(-1!==o.indexOf(s)){if(r.indexOf(o)>-1)return!1;e=e.replace(new RegExp("["+o+"]","gm"+t),"["+o+"]"),r.push(o)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,o=this.opt.accuracy,r="string"==typeof o?o:o.value,s="string"==typeof o?[]:o.limiters,n="";switch(s.forEach((function(e){n+="|"+t.escapeStr(e)})),r){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(n="\\s"+(n||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")))+"]*"+e+"[^"+n+"]*)";case"exactly":return"(^|\\s"+n+")("+e+")(?=$|\\s"+n+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,o=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===o.indexOf(e)&&o.push(e)})):e.trim()&&-1===o.indexOf(e)&&o.push(e)})),{keywords:o.sort((function(e,t){return t.length-e.length})),length:o.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var o=[],r=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var s=t.callNoMatchOnInvalidRanges(e,r),n=s.start,i=s.end;s.valid&&(e.start=n,e.length=i-n,o.push(e),r=i)})),o}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var o=void 0,r=void 0,s=!1;return e&&void 0!==e.start?(r=(o=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&r-t>0&&r-o>0?s=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:o,end:r,valid:s}}},{key:"checkWhitespaceRanges",value:function(e,t,o){var r=void 0,s=!0,n=o.length,i=t-n,a=parseInt(e.start,10)-i;return(r=(a=a>n?n:a)+parseInt(e.length,10))>n&&(r=n,this.log("End range automatically set to the max value of "+n)),a<0||r-a<0||a>n||r>n?(s=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===o.substring(a,r).replace(/\s+/g,"")&&(s=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:a,end:r,valid:s}}},{key:"getTextNodes",value:function(e){var t=this,o="",r=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){r.push({start:o.length,end:(o+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:o,nodes:r})}))}},{key:"matchesExclude",value:function(e){return s.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,o){var r=this.opt.element?this.opt.element:"mark",s=e.splitText(t),n=s.splitText(o-t),i=document.createElement(r);return i.setAttribute("data-markjs","true"),this.opt.className&&i.setAttribute("class",this.opt.className),i.textContent=s.textContent,s.parentNode.replaceChild(i,s),n}},{key:"wrapRangeInMappedTextNode",value:function(e,t,o,r,s){var n=this;e.nodes.every((function(i,a){var c=e.nodes[a+1];if(void 0===c||c.start>t){if(!r(i.node))return!1;var l=t-i.start,m=(o>i.end?i.end:o)-i.start,h=e.value.substr(0,i.start),p=e.value.substr(m+i.start);if(i.node=n.wrapRangeInTextNode(i.node,l,m),e.value=h+p,e.nodes.forEach((function(t,o){o>=a&&(e.nodes[o].start>0&&o!==a&&(e.nodes[o].start-=m),e.nodes[o].end-=m)})),o-=m,s(i.node.previousSibling,i.start),!(o>i.end))return!1;t=i.end}return!0}))}},{key:"wrapMatches",value:function(e,t,o,r,s){var n=this,i=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var s=void 0;null!==(s=e.exec(t.textContent))&&""!==s[i];)if(o(s[i],t)){var a=s.index;if(0!==i)for(var c=1;c<i;c++)a+=s[c].length;t=n.wrapRangeInTextNode(t,a,a+s[i].length),r(t.previousSibling),e.lastIndex=0}})),s()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,o,r,s){var n=this,i=0===t?0:t+1;this.getTextNodes((function(t){for(var a=void 0;null!==(a=e.exec(t.value))&&""!==a[i];){var c=a.index;if(0!==i)for(var l=1;l<i;l++)c+=a[l].length;var m=c+a[i].length;n.wrapRangeInMappedTextNode(t,c,m,(function(e){return o(a[i],e)}),(function(t,o){e.lastIndex=o,r(t)}))}s()}))}},{key:"wrapRangeFromIndex",value:function(e,t,o,r){var s=this;this.getTextNodes((function(n){var i=n.value.length;e.forEach((function(e,r){var a=s.checkWhitespaceRanges(e,i,n.value),c=a.start,l=a.end;a.valid&&s.wrapRangeInMappedTextNode(n,c,l,(function(o){return t(o,e,n.value.substring(c,l),r)}),(function(t){o(t,e)}))})),r()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,o=document.createDocumentFragment();e.firstChild;)o.appendChild(e.removeChild(e.firstChild));t.replaceChild(o,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var o=this;this.opt=t,this.log('Searching with expression "'+e+'"');var r=0,s="wrapMatches";this.opt.acrossElements&&(s="wrapMatchesAcrossElements"),this[s](e,this.opt.ignoreGroups,(function(e,t){return o.opt.filter(t,e,r)}),(function(e){r++,o.opt.each(e)}),(function(){0===r&&o.opt.noMatch(e),o.opt.done(r)}))}},{key:"mark",value:function(e,t){var o=this;this.opt=t;var r=0,s="wrapMatches",n=this.getSeparatedKeywords("string"==typeof e?[e]:e),i=n.keywords,a=n.length,c=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(s="wrapMatchesAcrossElements"),0===a?this.opt.done(r):function e(t){var n=new RegExp(o.createRegExp(t),"gm"+c),l=0;o.log('Searching with expression "'+n+'"'),o[s](n,1,(function(e,s){return o.opt.filter(s,t,r,l)}),(function(e){l++,r++,o.opt.each(e)}),(function(){0===l&&o.opt.noMatch(t),i[a-1]===t?o.opt.done(r):e(i[i.indexOf(t)+1])}))}(i[0])}},{key:"markRanges",value:function(e,t){var o=this;this.opt=t;var r=0,s=this.checkRanges(e);s&&s.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(s)),this.wrapRangeFromIndex(s,(function(e,t,r,s){return o.opt.filter(e,t,r,s)}),(function(e,t){r++,o.opt.each(e,t)}),(function(){o.opt.done(r)}))):this.opt.done(r)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var o=this.opt.element?this.opt.element:"*";o+="[data-markjs]",this.opt.className&&(o+="."+this.opt.className),this.log('Removal selector "'+o+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var r=s.matches(e,o),n=t.matchesExclude(e);return!r||n?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=r({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new s(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),n}();return function(e){var t=this,o=new n(e);return this.mark=function(e,r){return o.mark(e,r),t},this.markRegExp=function(e,r){return o.markRegExp(e,r),t},this.markRanges=function(e,r){return o.markRanges(e,r),t},this.unmark=function(e){return o.unmark(e),t},this}}()}]);