var Shared=function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=10)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IN_DEBUG_MODE=!0,t.NETWORK_IMAGE_BASE_URL="https://lumos2a72105a8e92d4d7888e81371d961ba33135845-prod.s3.us-east-2.amazonaws.com/public/networkImage.",t.LUMOS_API_URL="https://zy6kcqa01a.execute-api.us-east-2.amazonaws.com/prod/",t.LUMOS_APP_BASE_URL_DEBUG="https://localhost:3000",t.LUMOS_APP_BASE_URL_PROD="https://app.lumosbrowser.com",t.LUMOS_APP_BASE_URL=t.IN_DEBUG_MODE?t.LUMOS_APP_BASE_URL_DEBUG:t.LUMOS_APP_BASE_URL_PROD,t.LUMOS_APP_URL=t.LUMOS_APP_BASE_URL+"/messenger/",t.URL_LOGO_128="https://lumospublicassets.s3.us-east-2.amazonaws.com/logo128.png",t.QUERY_PARAM_STRING="q",t.MESSAGES={BROWSERBG_BROWSERFG_URL_UPDATED:"BROWSERBG_BROWSERFG_URL_UPDATED"},t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR="lumos_sidebar",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_OVERLAY="lumos_sidebar_overlay",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_TABS="lumos_sidebar_tabs",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_CONTENT="lumos_sidebar_content",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_SHOW="lumos_sidebar_show",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_SIDEBAR_HIDE="lumos_sidebar_hide",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_DRAWER="lumos_drawer",t.CONTENT_PAGE_ELEMENT_ID_LUMOS_HIDDEN="lumos_hidden",t.STYLE_COLOR_BORDER="#efefef",t.STYLE_COLOR_LINK="#609",t.STYLE_COLOR_TEXT="#333",t.STYLE_COLOR_TEXT_LIGHT="#777",t.STYLE_COLOR_LUMOS_GOLD="rgb(249, 236, 105, 0.3)",t.STYLE_COLOR_LUMOS_GOLD_SOLID="rgb(249, 236, 105, 1)",t.STYLE_COLOR_LUMOS_DARK_GOLD="#FFB302",t.STYLE_PADDING_PILL="2px 5px",t.STYLE_PADDING_TINY="2px",t.STYLE_PADDING_SMALL="5px",t.STYLE_PADDING_MEDIUM="10px",t.STYLE_PADDING_LARGE="15px",t.STYLE_BORDER_RADIUS_PILL="25px",t.STYLE_WIDTH_LOGO="30px",t.STYLE_WIDTH_SIDEBAR="300px",t.STYLE_WIDTH_SIDEBAR_TAB="100px",t.STYLE_WIDTH_SIDEBAR_TAB_LEFT="30px",t.STYLE_WIDTH_SIDEBAR_TAB_RIGHT="65px",t.STYLE_DRAWER_TAB_BOTTOM_OFFSET="-34px",t.STYLE_DRAWER_TAB_LEFT_OFFSET="10px",t.STYLE_SIDEBAR_HIDER_X_OFFSET="-20px",t.STYLE_SIDEBAR_HIDER_Y_OFFSET="20px",t.STYLE_SIDEBAR_SHOWER_X_OFFSET="5px",t.STYLE_SIDEBAR_SHOWER_Y_OFFSET="30px",t.STYLE_GOOGLE_SERP_EDIT_OFFSET="-20px",t.STYLE_NONSERP_EDIT_OFFSET="10px",t.STYLE_SIDEBAR_TOGGLER_WIDTH="100px",t.STYLE_HEIGHT_DRAWER="50px",t.STYLE_FONT_SIZE_SMALL="10px",t.STYLE_FONT_SIZE_MEDIUM="14px",t.STYLE_FONT_SIZE_LARGE="18px",t.STYLE_ZINDEX_MAX="2147483648",t.STYLE_ZINDEX_PENULTIMATE="2147483647",t.STYLE_PUBLISHER_NAME_LEFT_PADDING="20px",t.INTERCEPTIBLE_SEARCH_HOST_PARAMS={"www.google.com":"q","google.com":"q","www.bing.com":"q"},t.SERP_LINK_CHECK_INTERVAL=500,t.SENTENCE_SELECTION_REGEX=/(\.\s|\r)\b/,t.HIGHLIGHTS_VALID_ELEMENTS_TO_SEARCH="div, p, li, h1, h2, h3, h4, h5, h6",t.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_MOBILE="SELECTOR_GOOGLE_SERP_RESULT_MOBILE",t.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_IPAD="SELECTOR_GOOGLE_SERP_RESULT_IPAD",t.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_DESKTOP="SELECTOR_GOOGLE_SERP_RESULT_DESKTOP",t.CONFIG_SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP="SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP",t.DEFAULT_CONFIGS={SELECTOR_GOOGLE_SERP_RESULT_MOBILE:".xpd",SELECTOR_GOOGLE_SERP_RESULT_IPAD:"#main.xpd",SELECTOR_GOOGLE_SERP_RESULT_DESKTOP:".g .rc",SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP:".c2xzTb.kp-blk"},t.REACTION_EMOJI_AND_TEXT={STAR:"❤️ Great resource!",GOOD_AUTHOR:"👨‍⚕️ Great author",GOOD_PUBLISHER:"💯 I trust this publication",GOOD_CITATIONS:"🎓 Well cited ",NOT_USEFUL:"🤷 Not useful for this topic",FLAG:"💩 Bad Science",BAD_CITATIONS:"🧐 Needs citations"},t.MIN_GLOBAL_SET_TIMEOUT_VALUE=16,t.ID_NONSERP_CONTAINER="lumos_nonserp_info",t.CLASS_LUMOS_NETWORK_CHECKBOX="lumos-network-checkbox",t.ID_HIGHLIGHT_BAR_HIGHLIGHTED_TEXT="highlight-bar-highlighted-text",t.ID_HIGHLIGHT_BAR="highlight-bar",t.ID_HIGHLIGHT_CONTAINER="lumos_nonserp_info_url_highlights",t.ID_CLICKED_HIGHLIGHT_CONTAINER="lumos_nonserp_info_url_clicked_highlights",t.ID_NONSERP_PUBLISHER_HEADER="lumos_nonserp_publisher_header",t.ID_PUBLISHER_INFO_CONTAINER="lumos_nonserp_info_pub",t.ID_NONSERP_PUB_REACTION_EDITOR="lumos_nonserp_info_pub_reactions",t.ID_NONSERP_URL_INFO_CONTAINER="lumos_nonserp_info_url",t.CLASS_HIGHLIGHT_INDEX="highlights-index",t.CLASS_HIGHLIGHT_PILL="highlight-pill",t.CLASS_INACTIVE_HIGHLIGHT="inactive-highlight",t.CLASS_HIDE_HIGHLIGHTS="hide-highlights",t.ID_NETWORK_SELECTION_BAR="network-selection-bar",t.CLASS_AUTOMATIC_HIGHLIGHTS="automatic-highlights",t.CLASS_USER_HIGHLIGHTS="user-highlights",t.STYLE_HIGHLIGHT_BAR_HEIGHT="50%",t.STYLE_MARK_DEFAULT_BACKGROUND_COLOUR="transparent",t.STYLE_AUTOMATIC_HIGHLIGHT_BACKGROUND_COLOUR="yellow",t.STYLE_USER_HIGHLIGHT_BACKGROUND_COLOUR="greenyellow",t.STYLE_MARK_1_HIGHLIGHT_BACKGROUND_COLOUR="plum",t.STYLE_MARK_2_HIGHLIGHT_BACKGROUND_COLOUR="blueviolet",t.RESET_CSS=`\n    line-height: 1.3 !important;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    color: ${t.STYLE_COLOR_TEXT};\n    font-size: ${t.STYLE_FONT_SIZE_MEDIUM};\n    font-weight: normal;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n`},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=window.navigator.userAgent.toLowerCase().includes("mobi")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.debug=function(...e){n.IN_DEBUG_MODE&&console.log("LUMOS SHARED DEBUG: ",...e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOST_BLACKLIST=["localhost","localhost:3000","www.facebook.com","mail.google.com","app.asana.com","calendar.google.com","www.messenger.com","www.google.com"];t.DEFAULT_MEMBERSHIPS=["8fd59480-8ea1-4e8d-98c1-fb83ccf56855","a816ec16-1e25-4aac-b212-61cdf0c0dd1c","e7e1597e-ab88-4f1f-9541-1fd097552ff9"],t.NETWORK_IMAGE_BASE_URL="https://lumos2a72105a8e92d4d7888e81371d961ba33135845-prod.s3.us-east-2.amazonaws.com/public/networkImage.",t.MESSAGES={WEB_CONTENT_LINK_GRAPHQL_QUERY:"graphQLQuery",WEB_CONTENT_LINK_NEW_URL_PUBLICATION_INFORMATION:"newUrlAndPublicationInformation",WEB_CONTENT_USER_IS_USER_LOGGED_IN:"isUserLoggedIn",WEB_CONTENT_HIGHLIGHT_SHOW_AUTOMATIC_HIGHLIGHT:"showAutomaticHighlight",WEB_CONTENT_HIGHLIGHT_SHOW_NETWORK_HIGHLIGHT:"showNetworkHighlight",WEB_CONTENT_HIGHLIGHT_SHOW_USER_HIGHLIGHT:"showUserHighlight",CONTENT_WEB_LINK_CREATE_USER_AND_PUBLISHER:"createWebUrlAndPublisher",CONTENT_WEB_LINK_GRAPHQL_QUERY:"graphQLQuery",CONTENT_WEB_LINK_GET_URL_AND_PUBLICATION_INFORMATION:"getUrlAndPublicationInformation",CONTENT_WEB_LINK_CREATE_PUBLISHER_OPINION:"createPublisherOpinion",CONTENT_WEB_LINK_EDIT_PUBLISHER_BIO:"editPublisherBio",CONTENT_WEB_LINK_REMOVE_PUBLICATION_OPINION:"removePublicationOpinion",CONTENT_WEB_USER_IS_USER_LOGGED_IN:"isUserLoggedIn",CONTENT_WEB_HIGHLIGHT_SAVE_SELECTED_TEXT:"saveSelectedText",CONTENT_WEB_HIGHLIGHT_GET_ALL_HIGHLIGHT:"getAllHighlight"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(1),r=o(0),s=o(5);function i(e){let t=document.createElement("span");if("string"!=typeof e){let o=e,n=document.createElement("img");return n.src=o.href,n.setAttribute("style","\n            width: 15px;\n            height: 15px;\n            position: relative;\n            top: 2px;\n            left: -1px;\n        "),t.appendChild(n)}return(t.appendChild(document.createTextNode(e)),t)}function a({firstIcon:e,secondIcon:t,preText:o,reactionImage:s,reactionText:a,postText:c,expanded:l=!1,removeCallback:m,citationUrl:h}){let p=document.createElement("div");if(p.setAttribute("style",`\n        border-bottom: 1px solid ${r.STYLE_COLOR_LUMOS_GOLD_SOLID};\n        padding: ${r.STYLE_PADDING_PILL} 0;\n        margin-right: ${r.STYLE_PADDING_SMALL};\n        line-height: 1.5;\n        display: inline-block;\n    `),l&&(p.style.borderBottom="none"),p.appendChild(i(e)),p.appendChild(i(t)),o&&p.appendChild(document.createTextNode(" • "+o+" • ")),s&&a){p.appendChild(i(s));let e=document.createElement("span");e.appendChild(document.createTextNode(c?a+" • ":a)),p.appendChild(e),h&&p.addEventListener("click",()=>{window.location.href=h}),l||(e.style.display="none",n.isMobileDevice||(p.addEventListener("mouseenter",()=>{e.style.display="inherit"}),p.addEventListener("mouseleave",()=>{e.style.display="none"})))}if(c){let e=document.createElement("span");e.appendChild(document.createTextNode(c)),p.appendChild(e)}if(m){let e=document.createElement("span");e.appendChild(document.createTextNode(" ✕")),e.setAttribute("style","cursor: pointer;"),e.addEventListener("click",()=>{m()}),p.appendChild(e)}return p}function c(e,t,o,n){let s=document.createElement("span");s.setAttribute("style",`\n        border-bottom: 1px solid ${r.STYLE_COLOR_LUMOS_GOLD_SOLID};\n        padding: ${r.STYLE_PADDING_PILL} 0;\n        line-height: 1.5;\n    `);let i=document.createElement("span");return i.appendChild(document.createTextNode(n)),s.appendChild(document.createTextNode(o)),s.appendChild(document.createTextNode(": ")),s.appendChild(i),s}function l(e,t,o){let n=document.createElement(o||"span");return n.setAttribute("style",`\n        color: ${r.STYLE_COLOR_TEXT};\n        text-decoration: none;\n        font-family: sans-serif;\n    `),n.id=e,n.setAttribute("data-id",e),n.setAttribute("data-type",t),n}function m(e,t,o){"before"===o?e.parentNode.insertBefore(t,e):"after"===o?e.nextSibling?e.parentNode.insertBefore(t,e):e.parentNode.appendChild(t):"inside"===o&&e.appendChild(t)}function h(e,t,o,n){let r=l(n,"listComponentCreate");return r.id="lumos_list_"+n,m(t,r,o),{id:r.id,element:r}}function p(e,t){return!!e.getElementById("lumos_list_"+t)}function u(e,t,o){let n=e.getElementById("lumos_list_"+t),r=o;Array.from(n.children).forEach(e=>{n.removeChild(e)}),r.forEach(e=>{n.appendChild(e)})}t.createOrGetElementById=function(e,t,o){let n=e.getElementById(t);return n||(n=l(t,"",o),e.body.appendChild(n)),n},t.stylePill=function(e){n.isMobileDevice?(e.style.marginLeft="10px",e.style.marginTop="5px"):e.style.marginRight="5px",e.style.marginBottom="5px"},t.getOrCreateRandomIdForElement=function(e){let t=e.getAttribute("lumos_random_id");if(t)return t;const o=s();return e.setAttribute("lumos_random_id",o),o},t.componentNetworkImage=function(e,t){let o=document.createElement("img");return o.src=e.href,o.setAttribute("title","Network: "+t),o.setAttribute("style","\n        width: 15px;\n        height: 15px;\n        position: relative;\n        top: 2px;\n        left: -1px;\n    "),o},t.componentReactionPill=a,t.componentBio=c,t.componentPublicationReactions=function(e,t,o,s){let i=document.createElement("span"),a=document.createElement("span");if(a.appendChild(document.createTextNode("▼")),a.setAttribute("style",`\n        cursor: pointer;\n        color: ${r.STYLE_COLOR_LUMOS_GOLD_SOLID}\n    `),n.isMobileDevice||i.setAttribute("style",`\n            position: ${"down-left"===s?"absolute":"relative"};\n            left: ${"down-left"===s?r.STYLE_GOOGLE_SERP_EDIT_OFFSET:r.STYLE_NONSERP_EDIT_OFFSET};\n            top: 2px;\n        `),i.appendChild(a),n.isMobileDevice){const n="reactions",r=t.map((e,t)=>Object.assign(Object.assign({},e),{optionIndex:t}));a.addEventListener("click",()=>{document[n]=t,o({command:"showNativeActionSheet",data:{actionSheetId:n,text:e.host,options:JSON.stringify(r)}})})}else{let e=document.createElement("div");function c(e){e.style.visibility="hidden"}e.setAttribute("style",`\n            position: absolute;\n            right: 0;\n            background: white;\n            ${"down-left"===s?"top":"bottom"}: ${r.STYLE_FONT_SIZE_LARGE};\n            border: 1px solid ${r.STYLE_COLOR_BORDER};\n            color: ${r.STYLE_COLOR_LINK};\n            z-index: ${r.STYLE_ZINDEX_MAX}\n        `),c(e),function(e,t){t.forEach((function(t){let o=document.createElement("div");t.isSeparator?(o.appendChild(document.createTextNode(t.text)),o.setAttribute("style",`\n                        padding: ${r.STYLE_PADDING_SMALL} ${r.STYLE_PADDING_LARGE};\n                        border-bottom: 1px solid ${r.STYLE_COLOR_BORDER};\n                        border-top: 1px solid ${r.STYLE_COLOR_BORDER};\n                        color: ${r.STYLE_COLOR_TEXT_LIGHT};\n                    `)):(o.setAttribute("style",`\n                        padding: ${r.STYLE_PADDING_SMALL} ${r.STYLE_PADDING_LARGE};\n                        cursor: pointer;\n                    `),o.appendChild(document.createTextNode(t.text)),o.addEventListener("click",()=>{c(e),t.callback()},!1)),e.appendChild(o)}))}(e,t),i.appendChild(e),a.addEventListener("click",()=>{!function(e){return"visible"===e.style.visibility}(e)?function(e){e.style.visibility="visible"}(e):c(e)}),i.appendChild(e)}return i},t.createUIWrapper=l,t.insertElement=m,t.listComponentCreate=h,t.listComponentExists=p,t.listComponentGetByName=function(e,t){return e.getElementById("lumos_list_"+t)},t.listComponentUpdate=u,t.listComponentCreateOrUpdate=function(e,t,o,n,r){p(e,n)||h(0,t,o,n),u(e,n,r)},t.uiPublicationOpinionatorNetworkInfo_ReactionPill=function(e,t=null,o=!1){let n=l(e.id,"uiPublicationOpinionatorNetworkInfo_ReactionPill");return n.appendChild(a({firstIcon:"",secondIcon:"",reactionImage:e.reaction.emoji,reactionText:e.reaction.reaction,postText:e.opinionator.name,removeCallback:t,expanded:o})),n},t.uiPublicationOpinionatorNetworkInfo_Bio=function(e){let t=l(e.id,"uiPublicationOpinionatorNetworkInfo_Bio");return t.appendChild(c(0,e.network.name,e.opinionator.name,e.bio)),t},t.uiWebUrlOpinionatorNetworkInfo_ReactionPill=function(e,t=!1){let o=l(e.id,"uiWebUrlOpinionatorNetworkInfo_ReactionPill");return o.appendChild(a({firstIcon:"",secondIcon:"",reactionImage:e.reaction.emoji,reactionText:e.reaction.reaction,postText:e.opinionator.name,expanded:t,citationUrl:e.citation?e.citation:null})),o},t.uiWebUrlOpinionatorNetworkInfo_Bio=function(e){let t=l(e.id,"uiWebUrlOpinionatorNetworkInfo_Bio");return t.appendChild(c(0,e.network.name,e.opinionator.name,e.comment)),t}},function(e,t,o){var n,r,s=o(13),i=o(14),a=0,c=0;e.exports=function(e,t,o){var l=t&&o||0,m=t||[],h=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:r;if(null==h||null==p){var u=s();null==h&&(h=n=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==p&&(p=r=16383&(u[6]<<8|u[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:c+1,T=d-a+(_-c)/1e4;if(T<0&&void 0===e.clockseq&&(p=p+1&16383),(T<0||d>a)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=_,r=p;var E=(1e4*(268435455&(d+=122192928e5))+_)%4294967296;m[l++]=E>>>24&255,m[l++]=E>>>16&255,m[l++]=E>>>8&255,m[l++]=255&E;var g=d/4294967296*1e4&268435455;m[l++]=g>>>8&255,m[l++]=255&g,m[l++]=g>>>24&15|16,m[l++]=g>>>16&255,m[l++]=p>>>8|128,m[l++]=255&p;for(var f=0;f<6;++f)m[l+f]=h[f];return t||i(m)}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(2);t.getActionItemsForUrl=function(e,t,o){let s=[],i={};const a=new Set(t.listNetworkPublicationReactions.items.map(e=>(i[e.network.id]=e.network.name,e.network.id)));return s.push({text:e.host,isSeparator:!0}),a.forEach(a=>n(this,void 0,void 0,(function*(){var n;s.push({text:"Network: "+i[a],isSeparator:!0}),null===(n=t.listNetworkPublicationReactions.items)||void 0===n||n.filter(e=>Boolean(e.network.id===a&&!e.autogenerated)).forEach(t=>{s.push({text:(t.emoji||"")+t.reaction,callback:()=>{r.debug("REACTION",t.reaction,"on",e.href),o({command:"createPublisherOpinion",data:{publisherReactionId:t.id,networkId:t.network.id,link:e.href}})}})}),s.push({text:"💬 Edit comment",callback:()=>{const t=window.prompt("Add or edit a description for "+e.hostname,"");o({command:"editPublisherBio",data:{text:t,networkId:a,link:e.href}})}})}))),s}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(4),s=o(0),i=o(8),a=o(9),c=o(1),l=o(6),m=o(2),h=`\n    display: block;\n    padding: ${s.STYLE_PADDING_MEDIUM};\n    width: 100%;\n    border-bottom: 1px solid ${s.STYLE_COLOR_BORDER};\n    white-space: nowrap;\n`,p="\n    display: inline-block;\n    font-weight: bold;\n    max-width: 50%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    vertical-align: middle;\n";let u=!1,d=!1;function _(e,t){t||(e.style.maxHeight="2px")}function T(e){e.style.maxHeight="400px"}function E(e){e.style.maxHeight="2px"}function g(e){"400px"===e.style.maxHeight?e.style.maxHeight="2px":e.style.maxHeight="400px"}function f(e,t,o){let n=r.createOrGetElementById(e,s.ID_NONSERP_PUB_REACTION_EDITOR,"div");if(!e.getElementById(s.ID_NONSERP_PUBLISHER_HEADER)){let o=e.createElement("div");o.id=s.ID_NONSERP_PUBLISHER_HEADER;let r=new URL(e.location.href).hostname,i=e.createElement("span");i.appendChild(e.createTextNode(`Publisher • ${r}`)),o.appendChild(i),i.setAttribute("style",p),o.appendChild(n),o.setAttribute("style",h),t.appendChild(o)}if(o){let n=null,i=o.filter(e=>!!e.reaction).map(e=>r.uiPublicationOpinionatorNetworkInfo_ReactionPill(e,null,!0)),a=o.filter(e=>!!e.bio).map(e=>(n=e.publication.name,r.uiPublicationOpinionatorNetworkInfo_Bio(e)));if(a.length>0||i.length>0){let o=e.createElement("div");o.setAttribute("style",`padding: ${s.STYLE_PADDING_MEDIUM};`),t.appendChild(o),r.listComponentCreateOrUpdate(e,o,"inside","publication_reaction_nonserp",i),r.listComponentCreateOrUpdate(e,o,"inside","publication_bio_nonserp",a)}}}t.hideLumosInfoContainerIfMouseAway=_,t.showLumosInfoContainer=T,t.hideLumosInfoContainer=E,t.flipLumosInfoContainer=g,t.modifyNonSerpWithURLAndPublicationInfo=function(e,t){return n(this,void 0,void 0,(function*(){let o=new URL(e.location.href),n=r.createOrGetElementById(e,s.ID_NONSERP_CONTAINER,"div");n.setAttribute("style",`\n        ${s.RESET_CSS}\n        visibility: hidden;\n        position: fixed;\n        box-sizing: border-box;\n        bottom: 0;\n        width: 100%;\n        z-index: ${s.STYLE_ZINDEX_PENULTIMATE};\n        max-height: 2px;\n        transition: max-height 0.25s ease-out;\n        border-top: 2px solid ${s.STYLE_COLOR_LUMOS_GOLD_SOLID};\n        background: white;\n        left: 0;\n        right: 0;\n    `);let l=r.createUIWrapper(s.ID_NONSERP_URL_INFO_CONTAINER,"","div");n.appendChild(l);let m=r.createUIWrapper(s.ID_HIGHLIGHT_CONTAINER,"","div");m.setAttribute("style",`padding: ${s.STYLE_PADDING_SMALL}`);let u=r.createUIWrapper(s.ID_CLICKED_HIGHLIGHT_CONTAINER,"","div");u.setAttribute("style",`padding: ${s.STYLE_PADDING_SMALL}; visibility: hidden;`);let d=r.createUIWrapper(s.ID_PUBLISHER_INFO_CONTAINER,"","div");n.appendChild(d);let E=!1;n.addEventListener("mouseenter",t=>{E=!0,e.getSelection().toString(),T(n)});let w=e.createElement("div"),I=e.createElement("img");I.src=s.URL_LOGO_128,I.setAttribute("style",`\n        width: ${s.STYLE_WIDTH_LOGO};\n        height: ${s.STYLE_WIDTH_LOGO};\n    `),w.appendChild(I),w.setAttribute("style",`\n        cursor: pointer;\n        position: absolute;\n        left: ${s.STYLE_DRAWER_TAB_LEFT_OFFSET};\n        top: ${s.STYLE_DRAWER_TAB_BOTTOM_OFFSET};\n        border-radius: ${s.STYLE_PADDING_SMALL} ${s.STYLE_PADDING_SMALL} 0 0;\n        background: white;\n        border: 1px solid ${s.STYLE_COLOR_LUMOS_GOLD_SOLID};\n    `),w.addEventListener("click",()=>{g(n)}),n.appendChild(w),n.addEventListener("mouseleave",t=>{E=!1,setTimeout(()=>{e.getSelection().toString()||_(n,E)},3e3)}),n.onselectstart=()=>!1,n.onmousedown=()=>!1;let S=o.pathname,L=e.createElement("div");L.setAttribute("style",h);let y=e.createElement("span");y.appendChild(e.createTextNode(`This page • ${S}`)),y.setAttribute("style",p),L.appendChild(y),l.appendChild(L),i.isReadableDocument(e)&&a.addHighlightIndexToLumosContainer(L);let O=t.linkData;!function(e,t,o){if(o){let n=o.filter(e=>!!e.reaction).map(e=>r.uiWebUrlOpinionatorNetworkInfo_ReactionPill(e,!0)),i=e.createElement("div");i.setAttribute("style",`\n            padding: ${s.STYLE_PADDING_MEDIUM};\n        `),t.appendChild(i),n.length>0&&(r.listComponentCreateOrUpdate(e,i,"inside","url_info_nonserp",n),r.listComponentGetByName(e,"url_info_nonserp").setAttribute("style",`padding: ${s.STYLE_PADDING_SMALL}`))}}(e,l,O),c.isMobileDevice||(l.appendChild(m),l.appendChild(u));let N=t.publicationData;f(e,d,N),n.style.visibility="visible",(N.length>0||O.length>0)&&(w.style.backgroundColor=s.STYLE_COLOR_LUMOS_GOLD_SOLID)}))},t.modifyNonSerpPublicationInfo=function(e,t){return n(this,void 0,void 0,(function*(){let o=t.publicationData;const n=e.getElementById(s.ID_PUBLISHER_INFO_CONTAINER);f(e,n,o)}))},t.highlightText=function(e,t,o,n){const r=a.createHighlightSelectionText(e);let i=e.getElementById(s.ID_HIGHLIGHT_BAR),c=e.getElementById(s.ID_NETWORK_SELECTION_BAR),l=e.getElementById(s.ID_HIGHLIGHT_CONTAINER),m=e.getElementById(s.ID_NONSERP_CONTAINER);const h=1===r.selectedText.length&&10===r.selectedText.codePointAt(0);if(!r.selectedText||h||c)i?(E(m),e.getSelection().removeAllRanges(),l.removeChild(i)):r.selectedText&&!h||!c||(E(m),e.getSelection().removeAllRanges(),l.removeChild(c),e.removeEventListener("keyup",a.removeHighlightNetworkSelectionBarListener,!1));else{if(i){e.getElementById(s.ID_HIGHLIGHT_BAR_HIGHLIGHTED_TEXT).textContent=r.selectedText}else i=a.createHighlightInfoBar(r.selectedText),l.appendChild(i);function p(i){!function(i){if(r.selectedText&&("h"===i.key||"H"===i.key)){let i=e.getElementById(s.ID_HIGHLIGHT_BAR);l.removeChild(i),e.removeEventListener("keyup",p,!1),e.removeEventListener("keyup",_,!1),a.modifyPageWithHighlightNetworkSelection(e,t,r,o,n),u=!1,d=!1}}(i)}function _(t){!function(t){if(e.getSelection().toString()&&"Escape"===t.key){let t=e.getElementById(s.ID_HIGHLIGHT_BAR);t&&(E(m),e.getSelection().removeAllRanges(),l.removeChild(t),e.removeEventListener("keyup",_,!1),d=!1)}}(t)}T(m),u||(u=!0,e.addEventListener("keyup",p,!1)),d||(d=!0,e.addEventListener("keyup",_,!1))}},t.modifyNonSerpWithReactionEditor=function(e,t,o){if(m.debug("modifyNonSerpWithReactionEditor"),!(e&&t&&o))return;const n=new URL(e.location.href);let i=l.getActionItemsForUrl(n,t,o),a=r.componentPublicationReactions(n,i,o,"up-left");const c=e.getElementById(s.ID_NONSERP_PUB_REACTION_EDITOR);r.insertElement(c,a,"before")}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(17);t.isReadableDocument=function(e){var t=(new XMLSerializer).serializeToString(e),o=(new DOMParser).parseFromString(t,"text/html");return n.isProbablyReaderable(o)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(3),s=o(18),i=o(7),a=new Map,c=new Map;let l=!1,m=!1,h=[],p=null;function u(e,t,o,r,i,h){const p=new s(e.querySelectorAll("body"));r?(l=!0,p.mark(t,{className:n.CLASS_AUTOMATIC_HIGHLIGHTS,separateWordSearch:!1,acrossElements:!0,each:e=>{e.setAttribute("data-opinionator",o)}})):i?(c.has(i)||c.set(i,h),p.mark(t,{className:a.has(i)?a.get(i):(a.set(i,`mark-${a.size+1}`),`mark-${a.size}`),separateWordSearch:!1,acrossElements:!0,each:e=>{e.setAttribute("data-opinionator",o)}})):(m=!0,p.mark(t,{className:n.CLASS_USER_HIGHLIGHTS,separateWordSearch:!1,acrossElements:!0,each:e=>{e.setAttribute("data-opinionator",o)}}))}function d(e,t){let o=e.getSelection().toString();o&&(u(e,o,t,!1,null,null),setTimeout(()=>{p=null,e.getSelection().removeAllRanges()},5e3))}function _(e){let t=document.createElement("div");return t.setAttribute("id",e),t.setAttribute("style",`\n        height: ${n.STYLE_HIGHLIGHT_BAR_HEIGHT};\n        z-index: ${n.STYLE_ZINDEX_MAX};\n    `),t}function T(e,t,o,s,i){let a=_(n.ID_NETWORK_SELECTION_BAR);return a.appendChild(e.createTextNode("Select Network(s)")),t.forEach(t=>{const c=e.createElement("input");c.type="checkbox",c.name=t.name,c.value=t.id,c.id=t.id,c.style["-webkit-appearance"]="checkbox",c.classList.add(n.CLASS_LUMOS_NETWORK_CHECKBOX),c.onclick=function(t){let a=this;a.checked&&!a.disabled&&(a.disabled=!0,function(e,t,o,s,i){let a=t.getElementById(n.ID_HIGHLIGHT_CONTAINER),c=t.getElementById(n.ID_NETWORK_SELECTION_BAR);p&&clearTimeout(p),p=setTimeout(()=>{a.removeChild(c)},5e3),d(t,i),s({command:r.MESSAGES.CONTENT_WEB_HIGHLIGHT_SAVE_SELECTED_TEXT,data:{link:t.location.href,selectedNetwork:e.value,highlightSelection:o}})}(a,e,o,s,i))};const l=e.createElement("label");l.htmlFor=t.id,l.onclick=t=>{let o=e.getElementById(l.getAttribute("for"));o.checked=!0,o.onclick(t)},l.appendChild(e.createTextNode(t.name)),a.appendChild(c),a.appendChild(l)}),a}function E(e){!function(e){let t=document.getElementById(n.ID_NETWORK_SELECTION_BAR),o=document.getElementById(n.ID_NONSERP_CONTAINER),r=document.getElementById(n.ID_HIGHLIGHT_CONTAINER);"Escape"===e.key&&(document.getSelection().removeAllRanges(),i.hideLumosInfoContainer(o),r.removeChild(t),document.removeEventListener("keyup",E,!1))}(e)}function g(e,t){h.includes(t)?h=h.filter(e=>e!==t):h.push(t),function(e,t){h.includes(t)?e.classList.add(n.CLASS_INACTIVE_HIGHLIGHT):e.classList.remove(n.CLASS_INACTIVE_HIGHLIGHT)}(e,t),document.querySelectorAll("mark").forEach(e=>{!function(e,t){e.className.includes(t)&&(h.includes(t)?e.classList.add(n.CLASS_HIDE_HIGHLIGHTS):e.classList.remove(n.CLASS_HIDE_HIGHLIGHTS))}(e,t)})}t.addHighlightStylesheet=function(e){const t=e.createElement("style");t.type="text/css",t.innerHTML=`\n    mark {\n\t\tbackground-color: ${n.STYLE_MARK_DEFAULT_BACKGROUND_COLOUR};\n        color: initial;\n        padding: 0;\n        cursor: pointer;\n    }\n    .${n.CLASS_AUTOMATIC_HIGHLIGHTS} {\n        background-color: ${n.STYLE_AUTOMATIC_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .${n.CLASS_USER_HIGHLIGHTS} {\n        background-color: ${n.STYLE_USER_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .mark-1 {\n        background-color: ${n.STYLE_MARK_1_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .mark-2 {\n        background-color: ${n.STYLE_MARK_2_HIGHLIGHT_BACKGROUND_COLOUR};\n    }\n    .${n.CLASS_HIGHLIGHT_INDEX} {\n        font-size: ${n.STYLE_FONT_SIZE_SMALL};\n        vertical-align: middle;\n        margin-left: 5px;\n        overflow-x: scroll;\n        white-space: nowrap;\n        display: inline-block;\n        overflow: scroll;\n    }\n    .${n.CLASS_HIGHLIGHT_PILL} {\n        margin-right: 5px;\n        padding: 0 5px;\n        border-radius: 3px;\n        display: inline-block;\n        white-space: nowrap;\n        cursor: pointer;\n    }\n    .${n.CLASS_INACTIVE_HIGHLIGHT} {\n        background-color: ${n.STYLE_MARK_DEFAULT_BACKGROUND_COLOUR};\n    }\n    .${n.CLASS_HIDE_HIGHLIGHTS} {\n        background-color: transparent;\n    }\n    `,e.getElementsByTagName("head")[0].appendChild(t)},t.addExistingHighlightToPage=u,t.modifyPageWithHighlightCreation=d,t.createHighlightSelectionText=function(e){const t={selectedText:"",selectedTextParentTag:"",selectedTextParentText:""};if(e.getSelection&&(t.selectedText=e.getSelection().toString()),e.getSelection()&&e.getSelection().rangeCount){var o=e.getSelection().getRangeAt(0).commonAncestorContainer;let{selectedTextParentTag:r,selectedTextParentText:s}=function(e){for(var t=e;e;)if(t){if(t.tagName&&n.HIGHLIGHTS_VALID_ELEMENTS_TO_SEARCH.includes(t.tagName.toLowerCase())){return{selectedTextParentTag:t.tagName.toLowerCase(),selectedTextParentText:t.textContent}}t=t.previousElementSibling}else t=e=e.parentElement}(o);t.selectedTextParentTag=r,t.selectedTextParentText=s}return t},t.createHighlightInfoBar=function(e){let t=_(n.ID_HIGHLIGHT_BAR);t.appendChild(document.createTextNode("Press 'H' to save highlight"));const o=document.createElement("div");return o.id=n.ID_HIGHLIGHT_BAR_HIGHLIGHTED_TEXT,o.appendChild(document.createTextNode(e)),t.appendChild(o),t},t.modifyPageWithHighlightNetworkSelection=function(e,t,o,r,s){let a=e.getElementById(n.ID_NETWORK_SELECTION_BAR),c=e.getElementById(n.ID_NONSERP_CONTAINER),l=e.getElementById(n.ID_HIGHLIGHT_CONTAINER);a||(a=T(e,t,o,r,s),l.appendChild(a),i.showLumosInfoContainer(c),e.addEventListener("keyup",E,!1))},t.removeHighlightNetworkSelectionBarListener=E,t.addHighlightIndexToLumosContainer=function(e){const t=document.createElement("div");t.className=n.CLASS_HIGHLIGHT_INDEX;const o=setInterval(()=>{if(l){const e=document.createElement("span"),r=document.createTextNode("Auto Highlights");e.className=`${n.CLASS_HIGHLIGHT_PILL} ${n.CLASS_AUTOMATIC_HIGHLIGHTS}`,e.appendChild(r),t.appendChild(e),e.onclick=()=>g(e,n.CLASS_AUTOMATIC_HIGHLIGHTS),clearInterval(o)}},n.MIN_GLOBAL_SET_TIMEOUT_VALUE),r=setInterval(()=>{if(m){const e=document.createElement("span"),o=document.createTextNode("Your Highlights");e.className=`${n.CLASS_HIGHLIGHT_PILL} ${n.CLASS_USER_HIGHLIGHTS}`,e.appendChild(o),t.appendChild(e),e.onclick=()=>g(e,n.CLASS_USER_HIGHLIGHTS),clearInterval(r)}},n.MIN_GLOBAL_SET_TIMEOUT_VALUE),s=setInterval(()=>{if(a.size){let e=0;for(let o of a.keys()){e++;const r=document.createElement("span"),s=`mark-${e}`;r.onclick=()=>g(r,s);const i=document.createTextNode(c.get(o));r.className=`${n.CLASS_HIGHLIGHT_PILL} ${s}`,r.appendChild(i),t.appendChild(r)}clearInterval(s)}},n.MIN_GLOBAL_SET_TIMEOUT_VALUE);e.appendChild(t)},t.addHighlightTapListener=function(e){e.addEventListener("click",t=>{const o=t.target;o&&"mark"===o.tagName.toLowerCase()?function(e,t){let o=e.getElementById(n.ID_NONSERP_URL_INFO_CONTAINER),r=e.getElementById(n.ID_HIGHLIGHT_CONTAINER),s=e.getElementById(n.ID_CLICKED_HIGHLIGHT_CONTAINER),a=e.getElementById(n.ID_NONSERP_CONTAINER);const c=`Highlighted by ${t.getAttribute("data-opinionator")}`;s.firstChild?s.replaceChild(e.createTextNode(c),s.firstChild):s.appendChild(e.createTextNode(c)),s.style.visibility="visible",o.contains(r)&&(r.style.visibility="hidden"),i.showLumosInfoContainer(a)}(e,o):function(e){let t=e.getElementById(n.ID_NONSERP_URL_INFO_CONTAINER),o=e.getElementById(n.ID_HIGHLIGHT_CONTAINER),r=e.getElementById(n.ID_CLICKED_HIGHLIGHT_CONTAINER),s=e.getElementById(n.ID_NONSERP_CONTAINER);i.hideLumosInfoContainer(s),o.style.visibility="visible",t.contains(r)&&(r.style.visibility="hidden")}(e)})}},function(e,t,o){"use strict";function n(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}Object.defineProperty(t,"__esModule",{value:!0}),n(o(11)),n(o(0)),n(o(1)),n(o(2))},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(3),s=o(0),i=o(12),a=o(7),c=o(9),l=o(2),m=o(5),h=o(8),p=o(1);t.modifyPage=function(e,t,o,u,d,_,T){return n(this,void 0,void 0,(function*(){const E=i.serpUrlToSearchText(e),g=(e,o,n,s)=>{d({window:t,message:r.MESSAGES.WEB_CONTENT_LINK_GRAPHQL_QUERY,callback:({data:t})=>{l.debug("graphQLQuery",t,o,n,n==t.queryId),t.queryName===e&&t.queryId===n&&s(t.result)}})};let f={filter:{or:_.map(e=>({networkPublicationReactionNetworkId:{eq:e.id}}))},limit:100};const w=m();if(e.hostname===new URL(s.LUMOS_APP_BASE_URL).hostname);else if(E){const e=yield i.serpDocumentToLinks(o);u({command:"getBatchUrlandPublicationInformation",data:{links:e}}),d({window:t,message:r.MESSAGES.WEB_CONTENT_LINK_NEW_URL_PUBLICATION_INFORMATION,callback:e=>{let t=e.data;i.modifySerpWithURLAndPublicationInfo(o,t.publicationData,t.linkData,new URL(t.link),t.user,u)}}),g("listNetworkPublicationReactions",f,w,e=>{let t=e;i.modifySerpWithReactionEditor(o,t,u)}),u({command:r.MESSAGES.CONTENT_WEB_LINK_GRAPHQL_QUERY,data:{queryName:"listNetworkPublicationReactions",queryVariables:f,queryId:w}}),d({window:t,message:"nativeActionSheetOption",callback:e=>{const t=e.data.optionIndex,n=e.data.actionSheetId,r=o[n][t];r&&r.callback()}}),d({window:t,message:"nativeAlertAnswer",callback:e=>{l.debug(e.data.text)}})}else{const e=o.location.href;h.isReadableDocument(o)&&(o.addEventListener("mouseup",e=>a.highlightText(o,_,u,T)),p.isMobileDevice||c.addHighlightTapListener(o),c.addHighlightStylesheet(o),d({window:t,message:r.MESSAGES.WEB_CONTENT_HIGHLIGHT_SHOW_AUTOMATIC_HIGHLIGHT,callback:e=>{const{highlight:t,opinionator:n}=e.data;c.addExistingHighlightToPage(o,t,n,!0,null,null)}}),d({window:t,message:r.MESSAGES.WEB_CONTENT_HIGHLIGHT_SHOW_NETWORK_HIGHLIGHT,callback:e=>{const{highlight:t,opinionator:n,networkID:r,networkName:s}=e.data;c.addExistingHighlightToPage(o,t,n,!1,r,s)}}),d({window:t,message:r.MESSAGES.WEB_CONTENT_HIGHLIGHT_SHOW_USER_HIGHLIGHT,callback:e=>{const{highlight:t,opinionator:n}=e.data;c.addExistingHighlightToPage(o,t,n,!1,null,null)}}),u({command:r.MESSAGES.CONTENT_WEB_HIGHLIGHT_GET_ALL_HIGHLIGHT,data:{link:e}})),g("listNetworkPublicationReactions",f,w,e=>{let t=e;a.modifyNonSerpWithReactionEditor(o,t,u)}),d({window:t,message:r.MESSAGES.WEB_CONTENT_LINK_NEW_URL_PUBLICATION_INFORMATION,callback:e=>n(this,void 0,void 0,(function*(){let t=e.data;o.getElementById(s.ID_NONSERP_CONTAINER)?a.modifyNonSerpPublicationInfo(o,t):(yield a.modifyNonSerpWithURLAndPublicationInfo(o,t),u({command:r.MESSAGES.CONTENT_WEB_LINK_GRAPHQL_QUERY,data:{queryName:"listNetworkPublicationReactions",queryVariables:f,queryId:w}}))}))}),u({command:r.MESSAGES.CONTENT_WEB_LINK_GET_URL_AND_PUBLICATION_INFORMATION,data:{link:e}})}}))}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(3),s=o(4),i=o(0),a=o(2),c=o(15),l=o(1),m=o(6),h=o(16);function p(e){a.debug("function call - isInterceptibleSearchPage",e);const t=i.INTERCEPTIBLE_SEARCH_HOST_PARAMS[e.hostname];return t?e.searchParams.get(t):null}function u(e){a.debug("function call - serpDocumentToLinks",e);const t=new URL(e.location.href);return c.isGoogleSerpUrl(t)?c.googleSerpDocumentToLinks(e):Promise.resolve([])}function d(e,t){return n(this,void 0,void 0,(function*(){let o=[];return(yield c.getGoogleSearchContainers(e)).forEach((function(e){e.querySelector("a").hostname===t.hostname&&o.push(e)})),o}))}function _(e){let t=e.hostname;return t.startsWith("www.")&&(t=t.slice(4)),t}function T(e){return h.HOSTNAME_TO_PATTERN[_(e)]}t.serpUrlToSearchText=p,t.serpDocumentToLinks=u,t.getLinkContainersInSerp=function(e,t){return n(this,void 0,void 0,(function*(){let o=[];return(yield c.getGoogleSearchContainers(e)).forEach((function(e){e.querySelector("a").href===t.href&&o.push(e)})),o}))},t.getMatchingHostnameContainersInSerp=d,t.modifySerpWithURLAndPublicationInfo=function(e,t,o,m,h,p){return n(this,void 0,void 0,(function*(){(yield d(e,m)).forEach(n=>{if(!n)return;let u=c.getContainerForElementInGoogleResult(n,"domain_info"),d=c.getContainerForElementInGoogleResult(n,"anchor"),_=c.getContainerForElementInGoogleResult(n,"cached"),T=c.getContainerForElementInGoogleResult(n,"title"),E=s.getOrCreateRandomIdForElement(n);if(t&&m.href===d.href){if(!l.isMobileDevice)try{let e=u.parentElement;e.style.position="relative",e.style.display="block";let t=d.querySelector("br");t&&t.remove(),d.insertBefore(e,T)}catch(e){a.debug("error in repositioning google serp",e)}let o=t.filter(e=>!!e.reaction).map(e=>h&&e.opinionator.id==h.opinionator.id?s.uiPublicationOpinionatorNetworkInfo_ReactionPill(e,()=>{p({command:r.MESSAGES.CONTENT_WEB_LINK_REMOVE_PUBLICATION_OPINION,data:{opinion:e,link:m}})}):s.uiPublicationOpinionatorNetworkInfo_ReactionPill(e));s.listComponentCreateOrUpdate(e,d,"before","pub_reaction_"+E,o);let g=s.listComponentGetByName(e,"pub_reaction_"+E);l.isMobileDevice?g.setAttribute("style",`\n                    padding: ${i.STYLE_PADDING_SMALL} ${i.STYLE_PADDING_LARGE} 0 ${i.STYLE_PADDING_LARGE};\n                    display: block;\n                `):g.setAttribute("style","\n                    position: absolute;\n                    top: -23px;\n                    white-space: nowrap;\n                    overflow: hidden;\n                "),t.filter(e=>e.reaction&&"Blacklisted"===e.reaction.reaction&&e.opinionator.id==h.opinionator.id).length>0?c.modifyBlacklistedGoogleSearchResult(n,!0):c.modifyBlacklistedGoogleSearchResult(n,!1),t.filter(e=>e.reaction&&"Trusted"===e.reaction.reaction&&e.opinionator.id==h.opinionator.id).length>0?c.modifyTrustedGoogleSearchResult(n,!0):c.modifyTrustedGoogleSearchResult(n,!1);let f=t.filter(e=>!!e.bio).map(e=>s.uiPublicationOpinionatorNetworkInfo_Bio(e));s.listComponentCreateOrUpdate(e,u,"after","pub_bio_"+E,f);let w=s.listComponentGetByName(e,"pub_bio_"+E);l.isMobileDevice||w.setAttribute("style","\n                    // margin-left: 20px;\n                ");let I=u.innerText.split("›").slice(0,2).join("›");u.innerHTML=I,_&&(_.style.display="none")}if(o&&m.href===d.href){let t=c.getContainerForElementInGoogleResult(n,"preview_snippet"),r=o.filter(e=>!!e.reaction).map(e=>s.uiWebUrlOpinionatorNetworkInfo_ReactionPill(e));s.listComponentCreateOrUpdate(e,t,"after","url_reaction_"+E,r)}})}))},t.modifySerpWithReactionEditor=function(e,t,o){return n(this,void 0,void 0,(function*(){if(a.debug("modifySerpWithReactionEditor"),!(e&&t&&o))return;const r=yield c.getGoogleSearchContainers(e);e.querySelectorAll(i.DEFAULT_CONFIGS[i.CONFIG_SELECTOR_GOOGLE_SERP_OVERFLOWHIDDEN_KP]).forEach(e=>{e.style.overflow="visible"}),r.forEach((function(e){return n(this,void 0,void 0,(function*(){let n=new URL(e.querySelector("a").href),r=m.getActionItemsForUrl(n,t,o),i=s.componentPublicationReactions(n,r,o,"down-left");if(!e)return;let a=c.getContainerForElementInGoogleResult(e,"anchor");s.insertElement(a,i,"before")}))}))}))},t.urlToHostname=_,t.urlToSearchPattern=T,t.getAlternateSearchEnginesFromSerp=function(e){return n(this,void 0,void 0,(function*(){const t=p(new URL(e.location.href)),o=yield u(e),n=[...new Set(o.map(e=>_(new URL(e))))],r=[...new Set(n.map(e=>h.HOSTNAME_TO_ENTITY[e]).filter(e=>!!e))];let s=[],a=[];r.forEach(e=>{h.ENTITY_TO_HOSTNAMES[e].forEach(t=>{h.HOSTNAME_TO_PREFERENCE[t]&&(s.push({position:-1*(e.split("_").length-1),hostname:t,pattern:h.HOSTNAME_TO_PATTERN[t]}),a.push(t))})});const c=o.map(e=>new URL(e)).map((e,t)=>{let o=_(e);return a.includes(o)?null:{position:t,hostname:o,pattern:T(e)}}).filter(e=>!!e);let l={};s.concat(c).forEach(({position:e,hostname:t,pattern:o})=>{h.HOSTNAME_TO_PREFERENCE[t]&&(l[t]?l[t].score+=c.length-e:o&&(l[t]={hostname:t,pattern:o,score:e>0?c.length-e:1e3*-e}))});let m=Object.values(l).sort((e,t)=>t.score-e.score).map(({hostname:e,pattern:o,score:n},r)=>({title:h.HOSTNAME_TO_TITLE[e]?h.HOSTNAME_TO_TITLE[e]:e,url:new URL(o.replace("{searchTerms}",encodeURI(t))),default:!1}));return m.unshift({title:"Lumos",url:new URL(i.LUMOS_APP_BASE_URL+"/url-info-mobile-large/?src="+encodeURI(e.location.href)),default:!0}),m}))}},function(e,t){var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(o){var n=new Uint8Array(16);e.exports=function(){return o(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=o;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(0),s=o(1);function i(e){const t=s.isMobileDevice?r.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_MOBILE:r.CONFIG_SELECTOR_GOOGLE_SERP_RESULT_DESKTOP;return Promise.resolve(e.querySelectorAll(r.DEFAULT_CONFIGS[t]))}function a(e,t){let o=s.isMobileDevice?".qzEoUe":"cite",n=s.isMobileDevice?".PpBGzd":"h3",r=s.isMobileDevice?".MUxGbd":".st";switch(t){case"domain_info":return e.querySelector(o);case"title":return e.querySelector(n);case"preview_snippet":return e.querySelector(r);case"anchor":return e.querySelector("a");case"section_links":return e.querySelector(".osl");case"cached":return e.querySelector(".eFM0qc");case"kp-blk":return e.querySelector(".kp-blk");default:return null}}t.getGoogleSearchContainers=i,t.getContainerForElementInGoogleResult=a,t.isGoogleSerpUrl=function(e){return"www.google.com"===e.hostname&&"/search"===e.pathname&&null!==e.searchParams.get("q")&&void 0!==e.searchParams.get("q")},t.googleSerpDocumentToLinks=function(e){return n(this,void 0,void 0,(function*(){let t=[];return(yield i(e)).forEach((function(e){t.push(e.querySelector("a").href)})),t}))},t.modifyBlacklistedGoogleSearchResult=function(e,t){let o=a(e,"title"),n=a(e,"domain_info");t&&n&&o?n.setAttribute("style","text-decoration: line-through;"):t||"line-through"!==n.style.textDecoration||(n.style.textDecoration="inherit")},t.modifyTrustedGoogleSearchResult=function(e,t){let o=a(e,"domain_info");t&&o?o.style.fontStyle="italic":t||"italic"!==o.style.fontStyle||(o.style.fontStyle="inherit")}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOSTNAME_TO_ENTITY={"open.spotify.com":"_MUSIC","amazon.com":"_PRODUCT","walmart.com":"_PRODUCT","giphy.com":"_IMAGE","imgur.com":"_IMAGE","youtube.com":"_VIDEO","stackoverflow.com":"QA_PROGRAMMING","cooking.nytimes.com":"_RECIPE","seriouseats.com":"_RECIPE","bing.com/video":"_VIDEO","goodreads.com":"_PRODUCT_BOOK","kobo.com":"_PRODUCT_BOOK","libgen.ic":"_PRODUCT_BOOK","scholar.google.com":"_PAPER","sci-hub.tw":"_PAPER","emedicine.medscape.com":"_MEDICINE","webmd.com":"_MEDICINE","medlineplus.gov":"_MEDICINE","uptodate.com":"_MEDICINE","google.com":"GENERAL","bing.com":"GENERAL","duckduckgo.com":"GENERAL","unsplash.com":"_IMAGE","icons8.com":"_IMAGE_ICON","thenounproject.com":"_IMAGE_ICON","fontawesome.com":"_IMAGE_ICON","producthunt.com":"_PRODUCT_DIGITAL"},t.ENTITY_TO_HOSTNAMES={_MUSIC:["open.spotify.com"],_PRODUCT:["amazon.com"],_IMAGE:["giphy.com","unsplash.com"],_VIDEO:["youtube.com","bing.com/video"],QA_PROGRAMMING:["stackoverflow.com"],_RECIPE:["cooking.nytimes.com","seriouseats.com"],_PRODUCT_BOOK:["libgen.ic"],_PAPER:["scholar.google.com","sci-hub.tw"],_MEDICINE:["emedicine.medscape.com","uptodate.com"],GENERAL:["google.com","bing.com","duckduckgo.com"],_IMAGE_ICON:["icons8.com","thenounproject.com","fontawesome.com"],_PRODUCT_DIGITAL:["producthunt.com"]},t.HOSTNAME_TO_PREFERENCE={"open.spotify.com":!0,"amazon.com":!0,"giphy.com":!0,"youtube.com":!0,"stackoverflow.com":!0,"cooking.nytimes.com":!0,"seriouseats.com":!0,"bing.com/video":!0,"libgen.ic":!0,"scholar.google.com":!0,"sci-hub.tw":!0,"emedicine.medscape.com":!0,"uptodate.com":!0,"google.com":!0,"bing.com":!0,"duckduckgo.com":!0,"unsplash.com":!0,"icons8.com":!0,"thenounproject.com":!0,"fontawesome.com":!0,"producthunt.com":!0},t.HOSTNAME_TO_PATTERN={"shutterstock.com":"https://www.shutterstock.com/search/?searchterm={searchTerms}","jamieoliver.com":"https://www.jamieoliver.com/search/?s={searchTerms}","tenor.com":"https://tenor.com/search/?q={searchTerms}","apkpure.com":"https://apkpure.com/search?q={searchTerms}","collegemagazine.com":"https://www.collegemagazine.com/?s={searchTerms}","goodmenproject.com":"https://goodmenproject.com#?s={searchTerms}","perezhilton.com":"https://perezhilton.com?s={searchTerms}","nbcnews.com":"https://www.nbcnews.com/search?q={searchTerms}","urbandictionary.com":"https://www.urbandictionary.com/search.php?term={searchTerms}","washingtonian.com":"https://www.washingtonian.com/?s={searchTerms}","allmusic.com":"https://www.allmusic.com/search?term={searchTerms}","rollingstone.com":"https://pages.email.rollingstone.com/signup-api/?EmailAddress={searchTerms}","tripadvisor.ca":"https://www.tripadvisor.ca/Search?q={searchTerms}","co.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","cnet.com":"https://www.cnet.com/search/?query={searchTerms}","microsoft.com":"https://www.microsoft.com/en-us/search?q={searchTerms}","giphy.com":"https://giphy.com/search/{searchTerms}","bbcgoodfood.com":"https://www.bbcgoodfood.com/search/recipes?query={searchTerms}","moneycrashers.com":"https://www.moneycrashers.com/?s={searchTerms}","cookingclassy.com":"https://www.cookingclassy.com?s={searchTerms}","acegif.com":"https://acegif.com/?s={searchTerms}","sublimechina.com":"https://sublimechina.com/?s={searchTerms}","flickr.com":"https://www.flickr.com/search/?text={searchTerms}","plasticsurgerypeople.com":"https://www.plasticsurgerypeople.com/?s={searchTerms}","fivebooks.com":"https://fivebooks.com/?s={searchTerms}","hu.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","techsable.com":"https://techsable.com/?s={searchTerms}","walmart.com":"https://walmart.com/search/?query={searchTerms}","dc.eater.com":"https://voxmedia.createsend.com/t/d/s/pkuhli/?email={searchTerms}","tr.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","bing.com/video":"https://www.bing.com/videos/search?q={searchTerms}","id.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","cntraveler.com":"https://www.cntraveler.com/search?q={searchTerms}","bookdepository.com":"https://www.bookdepository.com/search?searchTerm={searchTerms}","icons8.com":"https://icons8.com/icons/set/{searchTerms}","templates.office.com":"https://templates.office.com/en-us/Search/results?query={searchTerms}","funnygifsbox.com":"https://funnygifsbox.com/?s={searchTerms}","iamandco.com":"https://iamandco.com/search?q={searchTerms}","intouchweekly.com":"https://www.intouchweekly.com/search-results/?_s={searchTerms}","pl.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","tailandfur.com":"https://tailandfur.com?s={searchTerms}","amindfullmom.com":"https://amindfullmom.com/?s={searchTerms}","discogs.com":"https://www.discogs.com/search/?q={searchTerms}","epicurious.com":"https://www.epicurious.com/search/?terms={searchTerms}","mashable.com":"https://mashable.com/search/?q={searchTerms}","pinterest.co.kr":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","tampabay.com":"https://www.tampabay.com/search/?q={searchTerms}","bbc.co.uk":"https://search.bbc.co.uk/search?q={searchTerms}","eonline.com":"https://www.eonline.com/search?query={searchTerms}","reddit.com":"https://www.google.com/search?q=site%3Areddit.com+{searchTerms}","metrolyrics.com":"https://www.metrolyrics.com/search.php","goodreads.com":"https://goodreads.com/search?query={searchTerms}","reactiongifs.com":"https://www.reactiongifs.com/?s={searchTerms}","tomsguide.com":"https://www.tomsguide.com/search?searchTerm={searchTerms}","imgflip.com":"https://imgflip.com/search?q={searchTerms}","nl.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","uncommongoods.com":"https://www.uncommongoods.com/blog/?s={searchTerms}","thebrobasket.com":"https://www.thebrobasket.com/?s={searchTerms}","esquire.com":"https://www.esquire.com/search/?q={searchTerms}","yourselfquotes.com":"https://www.yourselfquotes.com/?s={searchTerms}","moderngentlemanmagazine.com":"https://www.moderngentlemanmagazine.com/?s={searchTerms}","elitedaily.com":"https://www.elitedaily.com/search?q={searchTerms}","barnesandnoble.com":"https://www.barnesandnoble.com/includes/submit.jsp?_DARGS=/cartridges/HeaderSearchBox/HeaderSearchBox.jsp?Ntt={searchTerms}","gifts.com":"https://www.gifts.com/blog/thank-you?email={searchTerms}","hellomagazine.com":"https://hellomagazine.us12.list-manage.com/subscribe/post?u=194a250663bd2b8b5c5a586c3&id=95b594f122?EMAIL={searchTerms}","ar.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","agcwebpages.com":"https://www.paypal.com/cgi-bin/webscr?submit={searchTerms}","bing.com":"https://bing.com/search?q={searchTerms}","myrecipes.com":"https://www.myrecipes.com/search?q={searchTerms}","pandagif.com":"https://pandagif.com/search-post?search={searchTerms}","recipes.instantpot.com":"https://recipes.instantpot.com#?search={searchTerms}","today.com":"https://www.today.com/search?query={searchTerms}","photosforclass.com":"https://www.photosforclass.com/search?text={searchTerms}","quora.com":"https://www.quora.com/opensearch/query?q={searchTerms}&pw={startPage?}&format=rss","pinterest.fr":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","fi.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","blog.feedspot.com":"https://www.feedspot.com/?email={searchTerms}","seriouseats.com":"https://www.seriouseats.com/search?term={searchTerms}","kobo.com":"https://kobo.com/us/en/search?query={searchTerms}","gfycat.com":"https://gfycat.com/gifs/search?searchText={searchTerms}","cz.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","fontawesome.com":"https://fontawesome.com/icons?q={searchTerms}","washingtonpost.com":"//www.washingtonpost.com/newssearch/?query={searchTerms}","etsy.com":"https://www.etsy.com/join/email?from_page=https%3A%2F%2Fwww.etsy.com%2Fmarket%2Fsignificant_other?email={searchTerms}","realsimple.com":"https://www.realsimple.com/search?q={searchTerms}","menshealth.com":"https://www.menshealth.com/search/?q={searchTerms}","billboard.com":"https://www.billboard.com/search/?keys={searchTerms}","popsugar.com":"https://www.popsugar.com/gsearch?query={searchTerms}","lovehopeadventure.com":"https://lovehopeadventure.com?s={searchTerms}","birthmoviesdeath.com":"https://birthmoviesdeath.com?keywords={searchTerms}","ny.eater.com":"https://voxmedia.createsend.com/t/d/s/pkudkl/?email={searchTerms}","pinterest.en.uptodown.com":"https://en.uptodown.com/android/search?q={searchTerms}","finecooking.com":"https://www.finecooking.com?s={searchTerms}","glamour.com":"https://www.glamour.com/search?q={searchTerms}","jamesclear.com":"https://jamesclear.com/?s={searchTerms}","azlyrics.com":"//search.azlyrics.com/search.php?q={searchTerms}","sweetyhigh.com":"https://www.sweetyhigh.com/search?search={searchTerms}","thenounproject.com":"https://thenounproject.com/search/?q={searchTerms}","bakemesomesugar.com":"https://bakemesomesugar.com/?s={searchTerms}","store.instantpot.ca":"https://store.instantpot.ca/search?q={searchTerms}","theodysseyonline.com":"https://www.theodysseyonline.com/search/?q={searchTerms}","gettyimages.com":"https://www.gettyimages.com/search/2/image?phrase={searchTerms}","theguardian.com":"https://www.google.co.uk/search?q={searchTerms}","cnn.com":"https://www.cnn.com/search?q={searchTerms}","biography.com":"https://www.biography.com/search?query={searchTerms}","boredpanda.com":"//app.mailerlite.com/webforms/submit/r3n5d4?fields[email]={searchTerms}","bodymeasurements.org":"https://www.bodymeasurements.org/?s={searchTerms}","google.com":"https://google.com/search?q={searchTerms}","en.wikipedia.org":"https://en.wikipedia.org/w/index.php?search={searchTerms}","blog.personalizationmall.com":"https://blog.personalizationmall.com/?s={searchTerms}","youqueen.com":"https://youqueen.com/?s={searchTerms}","countryliving.com":"https://www.countryliving.com/search/?q={searchTerms}","diethood.com":"https://diethood.com/?s={searchTerms}","fodors.com":"https://www.fodors.com/search?search_string={searchTerms}","gifrific.com":"https://gifrific.com/?s={searchTerms}","mydomaine.com":"https://www.mydomaine.com/search?q={searchTerms}","vegrecipesofindia.com":"https://www.vegrecipesofindia.com/?s={searchTerms}","free-ebooks.net":"https://www.free-ebooks.net/search?q={searchTerms}","pressurecookrecipes.com":"https://www.pressurecookrecipes.com/?s={searchTerms}","mensjournal.com":"https://www.mensjournal.com?email={searchTerms}","thehollywoodgossip.com":"https://www.thehollywoodgossip.com/search?q={searchTerms}","starmagazine.com":"https://starmagazine.com/search?search={searchTerms}","kingsroadmerch.com":"https://kingsroadmerch.com/beastie-boys/search/index.php?search={searchTerms}","britannica.com":"https://www.britannica.com/print/article/1580265?sequence[]={searchTerms}","thesun.co.uk":"https://www.thesun.co.uk/?s={searchTerms}","bestbooks.net":"https://www.bestbooks.net/?s={searchTerms}","damndelicious.net":"https://damndelicious.net/?s={searchTerms}","celebritygossip.com":"https://www.celebritygossip.com/?s={searchTerms}","in.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","tripadvisor.com":"https://www.tripadvisor.com/Search?q={searchTerms}","m.youtube.com":"https://m.youtube.com/results?search_query={searchTerms}","time.com":"https://time.com/search?q={searchTerms}","atlantablackstar.com":"https://atlantablackstar.com/?s={searchTerms}","youtube.com":"https://youtube.com/results?search_query={searchTerms}","pinterest.se":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","dailymail.co.uk":"https://www.dailymail.co.uk/home/search.html?ITO=1704&searchPhrase={searchTerms}","celebrityinsider.org":"https://feedburner.google.com/fb/a/mailverify?email={searchTerms}","travelandleisure.com":"https://www.travelandleisure.com/search?q={searchTerms}","usatoday.com":"https://www.usatoday.com/search/?q={searchTerms}","bysophialee.com":"https://bysophialee.com/?s={searchTerms}","nationalzoo.si.edu":"https://nationalzoo.si.edu/webcams/panda-cam?search_keys={searchTerms}","syfy.com":"https://www.syfy.com/syfywire/chosen-one-of-the-day-the-panda-as-described-on-sifl-olly?newsletter[email]={searchTerms}","bestproducts.com":"https://www.bestproducts.com/search/?q={searchTerms}","travelchinaguide.com":"https://www.travelchinaguide.com/search/show.htm?q={searchTerms}","wikihow.com":"https://www.wikihow.com/wikiHowTo?search={searchTerms}","zoo.sandiegozoo.org":"https://zoo.sandiegozoo.org/site-search?search_api_fulltext={searchTerms}","gr.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","theshaderoom.com":"https://theshaderoom.com/#gf_3?input_2={searchTerms}","medlineplus.gov":"https://vsearch.nlm.nih.gov/vivisimo/cgi-bin/query-meta?query={searchTerms}","amazon.co.uk":"https://www.amazon.co.uk/s/ref=nb_sb_noss?field-keywords={searchTerms}","nydailynews.com":"https://www.nydailynews.com/search/?={searchTerms}","producthunt.com":"https://www.producthunt.com/search?q={searchTerms}","stockfreeimages.com":"https://www.stockfreeimages.com/search.php?search={searchTerms}","london.eater.com":"https://voxmedia.createsend.com/t/d/s/mutqk/?email={searchTerms}","thedailymeal.com":"https://www.thedailymeal.com/wine-search/Marco%20Felluga?text={searchTerms}","livemusicblog.com":"https://livemusicblog.com/?s={searchTerms}","duckduckgo.com":"https://duckduckgo.com/?q={searchTerms}","bhg.com":"https://www.bhg.com        /search/?q={searchTerms}","gossip-tv.gr":"https://www.gossip-tv.gr/search?q={searchTerms}","lifewire.com":"https://www.lifewire.com/search?q={searchTerms}","stackoverflow.com":"https://www.google.com/search?q=site%3Astackoverflow.com+{searchTerms}","harpersbazaar.com":"https://www.harpersbazaar.com/search/?q={searchTerms}","worldwildlife.org":"https://www.worldwildlife.org/search?x={searchTerms}","express.co.uk":"https://www.express.co.uk/search?query={searchTerms}","rd.com":"https://www.rd.com/?s={searchTerms}","idonthavetimeforthat.com":"https://www.idonthavetimeforthat.com/?s={searchTerms}","pbh2.com":"//pbh-network.com/subs.php?EMAIL={searchTerms}","pinterest.es":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","istockphoto.com":"https://www.istockphoto.com/search/2/image?phrase={searchTerms}","open.spotify.com":"https://open.spotify.com/search/{searchTerms}","atlantamagazine.com":"https://www.atlantamagazine.com/?s={searchTerms}","tumblr.com":"https://www.tumblr.com/search?q={searchTerms}","amazon.com":"https://www.amazon.com/s?k={searchTerms}","healthyceleb.com":"https://healthyceleb.com/?s={searchTerms}","techlicious.com":"https://www.techlicious.com/?keywords={searchTerms}","lifeandstylemag.com":"https://www.lifeandstylemag.com/search-results/?_s={searchTerms}","last.fm":"https://www.last.fm/search?q={searchTerms}","bestofcomicbooks.com":"https://bestofcomicbooks.com/?s={searchTerms}","pinterest.jp":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","people.com":"https://people.com        /search/?q={searchTerms}","temeculablogs.com":"https://temeculablogs.com/?s={searchTerms}","123rf.com":"https://www.123rf.com/reversesearch/?file_upload={searchTerms}","pipingpotcurry.com":"https://pipingpotcurry.com/?s={searchTerms}","nme.com":"https://www.nme.com/?s={searchTerms}","target.com":"https://www.target.com/s?searchTerm={searchTerms}","abebooks.com":"https://www.abebooks.com/servlet/SearchResults?kn={searchTerms}","dwellinginhappiness.com":"https://www.dwellinginhappiness.com/?s={searchTerms}","cookinglight.com":"https://www.cookinglight.com/search?q={searchTerms}","money.usnews.com":"https://money.usnews.com/emailprefs/list-add?list=US+News+Invested?email={searchTerms}","pinchofyum.com":"https://pinchofyum.com/?s={searchTerms}","pinterest.it":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","cosmopolitan.com":"https://www.cosmopolitan.com/uk/search/?q={searchTerms}","scholar.google.com":"https://scholar.google.com/scholar?q={searchTerms}","tasteofhome.com":"https://www.tasteofhome.com/search/index?search={searchTerms}","cooksillustrated.com":"https://www.cooksillustrated.com/search?q={searchTerms}","goodhousekeeping.com":"https://www.goodhousekeeping.com/search/?q={searchTerms}","digitaltrends.com":"https://www.digitaltrends.com?s={searchTerms}","marthastewart.com":"https://www.marthastewart.com/search?q={searchTerms}","elle.com":"https://www.elle.com/search/?q={searchTerms}","picgifs.com":"https://www.picgifs.com/search/images?query={searchTerms}","simplyrecipes.com":"https://www.simplyrecipes.com/?s={searchTerms}","imgur.com":"https://imgur.com/search?q={searchTerms}","classic.wowhead.com":"https://classic.wowhead.com/search?q={searchTerms}","bustle.com":"https://www.bustle.com/search?q={searchTerms}","justjared.com":"https://www.justjared.com/?s={searchTerms}","pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","gossipcop.com":"https://www.gossipcop.com/?s={searchTerms}","msn.com":"https://www.bing.com/search?scope=web?q={searchTerms}","br.pinterest.com":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","topinspired.com":"https://www.topinspired.com/?s={searchTerms}","invertedgear.com":"https://www.invertedgear.com/contact#contact_form?contact[email]={searchTerms}","tmz.com":"https://www.tmz.com/search/?q={searchTerms}","pinterest.com.mx":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","sci-hub.tw":"https://sci-hub.tw/?request={searchTerms}","bestreviews.com":"https://bestreviews.com/search?q={searchTerms}","thespruceeats.com":"https://www.thespruceeats.com/search/?q={searchTerms}","foodandwine.com":"https://www.foodandwine.com/search?q={searchTerms}","momenvy.co":"https://momenvy.co/?s={searchTerms}","delish.com":"https://www.delish.com/search/?q={searchTerms}","libgen.ic":"https://libgen.lc/search.php?req={searchTerms}","pinterest.de":"https://www.pinterest.com/search/pins/?q={searchTerms}&rs=direct_navigation","webmd.com":"https://www.webmd.com/search/search_results/default.aspx?query={searchTerms}","penguinrandomhouse.com":"https://www.penguinrandomhouse.com/search/site?q={searchTerms}","leakedpie.com":"https://leakedpie.com/?s={searchTerms}","wellplated.com":"https://www.wellplated.com/?s={searchTerms}","bestrestaurantssedona.com":"https://bestrestaurantssedona.com/listings/?search_keywords={searchTerms}","thegreatestbooks.org":"https://www.thegreatestbooks.org/items/search?search_terms={searchTerms}","github.com":"https://github.com/search?q={searchTerms}","cooking.nytimes.com":"https://cooking.nytimes.com/search?q={searchTerms}","store.instantpot.com":"https://store.instantpot.com/search?q={searchTerms}","towardsdatascience.com":"https://towardsdatascience.com/search?q={searchTerms}&ref=opensearch","uptodate.com":"https://www.uptodate.com/contents/search?search={searchTerms}","play.google.com":"https://play.google.com/store/search?q={searchTerms}&utm_source=opensearch","unsplash.com":"https://unsplash.com/s?searchKeyword={searchTerms}","wall.alphacoders.com":"https://wall.alphacoders.comsearch.php?search={searchTerms}","lowgif.com":"https://www.lowgif.com#?s={searchTerms}","emedicine.medscape.com":"https://search.medscape.com/search/?q={searchTerms}","huffpost.com":"https://search.huffpost.com/search?p={searchTerms}","gif-vif.com":"https://www.gif-vif.com/search.php?search_keyword={searchTerms}"},t.HOSTNAME_TO_TITLE={"open.spotify.com":"Spotify","amazon.com":"Amazon","walmart.com":"Walmart","giphy.com":"Giphy","imgur.com":"Imgur","youtube.com":"YouTube","stackoverflow.com":"StackOverflow","cooking.nytimes.com":"NYTimes Cooking","seriouseats.com":"Serious Eats","bing.com/video":"Bing Video","goodreads.com":"Goodreads","kobo.com":"Kobo","libgen.ic":"Library Genesis","scholar.google.com":"Google Scholar","sci-hub.tw":"Sci Hub","emedicine.medscape.com":"Medscape","webmd.com":"WebMD","medlineplus.gov":"Medline Plus","uptodate.com":"UpToDate","google.com":"Google Scholar","bing.com":"Bing","duckduckgo.com":"DuckDuckGo","unsplash.com":"Unsplash","icons8.com":"Icons8","thenounproject.com":"The Noun Project","fontawesome.com":"Font Awesome","producthunt.com":"Product Hunt"}},function(e,t,o){"use strict";o.r(t),o.d(t,"isProbablyReaderable",(function(){return s}));var n={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function r(e){return!(e.style&&"none"==e.style.display||e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"true"==e.getAttribute("aria-hidden"))}function s(e,t){t||(t=r);var o=document.querySelectorAll("article").length;if(1===o)return!0;if(o>1)return!1;var s=e.querySelectorAll("p, pre"),i=e.querySelectorAll("div > br");if(i.length){var a=new Set(s);[].forEach.call(i,(function(e){a.add(e.parentNode)})),s=Array.from(a)}var c=0;return[].some.call(s,(function(e){if(!t(e))return!1;var o=e.className+" "+e.id;if(n.unlikelyCandidates.test(o)&&!n.okMaybeItsACandidate.test(o))return!1;if(e.matches("li p"))return!1;var r=e.textContent.trim().length;return!(r<140)&&(c+=Math.sqrt(r-140))>20}))}},function(e,t,o){
/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r=function(){function e(o){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=o,this.iframes=n,this.exclude=r,this.iframesTimeout=s}return o(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var o=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||o||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=void 0;try{var r=e.contentWindow;if(n=r.document,!r||!n)throw new Error("iframe inaccessible")}catch(e){o()}n&&t(n)}},{key:"isIframeBlank",value:function(e){var t="about:blank",o=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&o!==t&&o}},{key:"observeIframeLoad",value:function(e,t,o){var n=this,r=!1,s=null,i=function i(){if(!r){r=!0,clearTimeout(s);try{n.isIframeBlank(e)||(e.removeEventListener("load",i),n.getIframeContents(e,t,o))}catch(e){o()}}};e.addEventListener("load",i),s=setTimeout(i,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,o){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,o):this.getIframeContents(e,t,o):this.observeIframeLoad(e,t,o)}catch(e){o()}}},{key:"waitForIframes",value:function(e,t){var o=this,n=0;this.forEachIframe(e,(function(){return!0}),(function(e){n++,o.waitForIframes(e.querySelector("html"),(function(){--n||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,o,n){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=t.querySelectorAll("iframe"),a=i.length,c=0;i=Array.prototype.slice.call(i);var l=function(){--a<=0&&s(c)};a||l(),i.forEach((function(t){e.matches(t,r.exclude)?l():r.onIframeReady(t,(function(e){o(t)&&(c++,n(e)),l()}),l)}))}},{key:"createIterator",value:function(e,t,o){return document.createNodeIterator(e,t,o,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,o){if(e.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,o,n){var r=!1,s=!1;return n.forEach((function(e,t){e.val===o&&(r=t,s=e.handled)})),this.compareNodeIframe(e,t,o)?(!1!==r||s?!1===r||s||(n[r].handled=!0):n.push({val:o,handled:!0}),!0):(!1===r&&n.push({val:o,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,o,n){var r=this;e.forEach((function(e){e.handled||r.getIframeContents(e.val,(function(e){r.createInstanceOnIframe(e).forEachNode(t,o,n)}))}))}},{key:"iterateThroughNodes",value:function(e,t,o,n,r){for(var s,i=this,a=this.createIterator(t,e,n),c=[],l=[],m=void 0,h=void 0;s=void 0,s=i.getIteratorNode(a),h=s.prevNode,m=s.node;)this.iframes&&this.forEachIframe(t,(function(e){return i.checkIframeFilter(m,h,e,c)}),(function(t){i.createInstanceOnIframe(t).forEachNode(e,(function(e){return l.push(e)}),n)})),l.push(m);l.forEach((function(e){o(e)})),this.iframes&&this.handleOpenIframes(c,e,o,n),r()}},{key:"forEachNode",value:function(e,t,o){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=this.getContexts(),i=s.length;i||r(),s.forEach((function(s){var a=function(){n.iterateThroughNodes(e,s,t,o,(function(){--i<=0&&r()}))};n.iframes?n.waitForIframes(s,a):a()}))}}],[{key:"matches",value:function(e,t){var o="string"==typeof t?[t]:t,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){var r=!1;return o.every((function(t){return!n.call(e,t)||(r=!0,!1)})),r}return!1}}]),e}(),s=function(){function s(e){t(this,s),this.ctx=e,this.ie=!1;var o=window.navigator.userAgent;(o.indexOf("MSIE")>-1||o.indexOf("Trident")>-1)&&(this.ie=!0)}return o(s,[{key:"log",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",n=this.opt.log;this.opt.debug&&"object"===(void 0===n?"undefined":e(n))&&"function"==typeof n[o]&&n[o]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,o=this.opt.caseSensitive?"":"i",n=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var r in t)if(t.hasOwnProperty(r)){var s=t[r],i="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(s):this.escapeStr(s);""!==i&&""!==a&&(e=e.replace(new RegExp("("+this.escapeStr(i)+"|"+this.escapeStr(a)+")","gm"+o),n+"("+this.processSynomyms(i)+"|"+this.processSynomyms(a)+")"+n))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,o){var n=o.charAt(t+1);return/[(|)\\]/.test(n)||""===n?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],o=this.opt.ignorePunctuation;return Array.isArray(o)&&o.length&&t.push(this.escapeStr(o.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",o=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],n=[];return e.split("").forEach((function(r){o.every((function(o){if(-1!==o.indexOf(r)){if(n.indexOf(o)>-1)return!1;e=e.replace(new RegExp("["+o+"]","gm"+t),"["+o+"]"),n.push(o)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,o=this.opt.accuracy,n="string"==typeof o?o:o.value,r="string"==typeof o?[]:o.limiters,s="";switch(r.forEach((function(e){s+="|"+t.escapeStr(e)})),n){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(s="\\s"+(s||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")))+"]*"+e+"[^"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+e+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,o=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===o.indexOf(e)&&o.push(e)})):e.trim()&&-1===o.indexOf(e)&&o.push(e)})),{keywords:o.sort((function(e,t){return t.length-e.length})),length:o.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var o=[],n=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var r=t.callNoMatchOnInvalidRanges(e,n),s=r.start,i=r.end;r.valid&&(e.start=s,e.length=i-s,o.push(e),n=i)})),o}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var o=void 0,n=void 0,r=!1;return e&&void 0!==e.start?(n=(o=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&n-t>0&&n-o>0?r=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:o,end:n,valid:r}}},{key:"checkWhitespaceRanges",value:function(e,t,o){var n=void 0,r=!0,s=o.length,i=t-s,a=parseInt(e.start,10)-i;return(n=(a=a>s?s:a)+parseInt(e.length,10))>s&&(n=s,this.log("End range automatically set to the max value of "+s)),a<0||n-a<0||a>s||n>s?(r=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===o.substring(a,n).replace(/\s+/g,"")&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:a,end:n,valid:r}}},{key:"getTextNodes",value:function(e){var t=this,o="",n=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){n.push({start:o.length,end:(o+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:o,nodes:n})}))}},{key:"matchesExclude",value:function(e){return r.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,o){var n=this.opt.element?this.opt.element:"mark",r=e.splitText(t),s=r.splitText(o-t),i=document.createElement(n);return i.setAttribute("data-markjs","true"),this.opt.className&&i.setAttribute("class",this.opt.className),i.textContent=r.textContent,r.parentNode.replaceChild(i,r),s}},{key:"wrapRangeInMappedTextNode",value:function(e,t,o,n,r){var s=this;e.nodes.every((function(i,a){var c=e.nodes[a+1];if(void 0===c||c.start>t){if(!n(i.node))return!1;var l=t-i.start,m=(o>i.end?i.end:o)-i.start,h=e.value.substr(0,i.start),p=e.value.substr(m+i.start);if(i.node=s.wrapRangeInTextNode(i.node,l,m),e.value=h+p,e.nodes.forEach((function(t,o){o>=a&&(e.nodes[o].start>0&&o!==a&&(e.nodes[o].start-=m),e.nodes[o].end-=m)})),o-=m,r(i.node.previousSibling,i.start),!(o>i.end))return!1;t=i.end}return!0}))}},{key:"wrapMatches",value:function(e,t,o,n,r){var s=this,i=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var r=void 0;null!==(r=e.exec(t.textContent))&&""!==r[i];)if(o(r[i],t)){var a=r.index;if(0!==i)for(var c=1;c<i;c++)a+=r[c].length;t=s.wrapRangeInTextNode(t,a,a+r[i].length),n(t.previousSibling),e.lastIndex=0}})),r()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,o,n,r){var s=this,i=0===t?0:t+1;this.getTextNodes((function(t){for(var a=void 0;null!==(a=e.exec(t.value))&&""!==a[i];){var c=a.index;if(0!==i)for(var l=1;l<i;l++)c+=a[l].length;var m=c+a[i].length;s.wrapRangeInMappedTextNode(t,c,m,(function(e){return o(a[i],e)}),(function(t,o){e.lastIndex=o,n(t)}))}r()}))}},{key:"wrapRangeFromIndex",value:function(e,t,o,n){var r=this;this.getTextNodes((function(s){var i=s.value.length;e.forEach((function(e,n){var a=r.checkWhitespaceRanges(e,i,s.value),c=a.start,l=a.end;a.valid&&r.wrapRangeInMappedTextNode(s,c,l,(function(o){return t(o,e,s.value.substring(c,l),n)}),(function(t){o(t,e)}))})),n()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,o=document.createDocumentFragment();e.firstChild;)o.appendChild(e.removeChild(e.firstChild));t.replaceChild(o,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var o=this;this.opt=t,this.log('Searching with expression "'+e+'"');var n=0,r="wrapMatches";this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,(function(e,t){return o.opt.filter(t,e,n)}),(function(e){n++,o.opt.each(e)}),(function(){0===n&&o.opt.noMatch(e),o.opt.done(n)}))}},{key:"mark",value:function(e,t){var o=this;this.opt=t;var n=0,r="wrapMatches",s=this.getSeparatedKeywords("string"==typeof e?[e]:e),i=s.keywords,a=s.length,c=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===a?this.opt.done(n):function e(t){var s=new RegExp(o.createRegExp(t),"gm"+c),l=0;o.log('Searching with expression "'+s+'"'),o[r](s,1,(function(e,r){return o.opt.filter(r,t,n,l)}),(function(e){l++,n++,o.opt.each(e)}),(function(){0===l&&o.opt.noMatch(t),i[a-1]===t?o.opt.done(n):e(i[i.indexOf(t)+1])}))}(i[0])}},{key:"markRanges",value:function(e,t){var o=this;this.opt=t;var n=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,(function(e,t,n,r){return o.opt.filter(e,t,n,r)}),(function(e,t){n++,o.opt.each(e,t)}),(function(){o.opt.done(n)}))):this.opt.done(n)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var o=this.opt.element?this.opt.element:"*";o+="[data-markjs]",this.opt.className&&(o+="."+this.opt.className),this.log('Removal selector "'+o+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var n=r.matches(e,o),s=t.matchesExclude(e);return!n||s?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=n({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new r(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),s}();return function(e){var t=this,o=new s(e);return this.mark=function(e,n){return o.mark(e,n),t},this.markRegExp=function(e,n){return o.markRegExp(e,n),t},this.markRanges=function(e,n){return o.markRanges(e,n),t},this.unmark=function(e){return o.unmark(e),t},this}}()}]);